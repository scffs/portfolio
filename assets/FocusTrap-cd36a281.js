var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;import{r as a}from"./react-37698f52.js";import{e as l,f as s,o as i,a5 as c,h as u,g as f,a8 as p,a9 as d,aa as v}from"./AppWrapper-fa8f88ad.js";function m(e){const t=new Set;return(e,r="warn")=>{if(!t.has(e)){t.add(e)}}}const y=p.join(),h=e=>{var p=e,{Component:m="div",onClose:h,restoreFocus:b=!0,timeout:g=0,getRootRef:w,children:E}=p,O=((e,o)=>{var a={};for(var l in e)r.call(e,l)&&o.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&t)for(var l of t(e))o.indexOf(l)<0&&n.call(e,l)&&(a[l]=e[l]);return a})(p,["Component","onClose","restoreFocus","timeout","getRootRef","children"]);const j=l(w),{document:C,window:S}=s(),[x,A]=a.useState(null),[I,P]=a.useState(null),{keyboardInput:R}=a.useContext(i),F=c((()=>{var e;R&&!(null==(e=j.current)?void 0:e.contains(C.activeElement))&&(null==x?void 0:x.length)&&x[0].focus()}),g);u((()=>{F.set()}),[]),u((()=>{if(!j.current)return;const e=[];Array.prototype.forEach.call(j.current.querySelectorAll(y),(t=>{const{display:r,visibility:n}=S.getComputedStyle(t);"none"!==r&&"hidden"!==n&&e.push(t)})),0===e.length&&e.push(j.current),A(e)}),[E]);const k=c((()=>{I&&I.focus()}),g);u((()=>{if(b&&C.activeElement)return P(C.activeElement),()=>{k.set()}}),[b]);return f(C,"keydown",(e=>{if(d(e)===v.TAB&&(null==x?void 0:x.length)){const t=x.length-1,r=x.findIndex((t=>t===e.target)),n=-1===r||r===t&&!e.shiftKey;if(n||0===r&&e.shiftKey){e.preventDefault();const r=x[n?0:t];return r!==C.activeElement&&r.focus(),!1}}return h&&d(e)===v.ESCAPE&&h(),!0}),{capture:!0}),a.createElement(m,((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&o(e,l,a[l]);return e})({tabIndex:-1,ref:j},O),E)};export{h as F,m as w};
