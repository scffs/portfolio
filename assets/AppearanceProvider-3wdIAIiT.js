var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&s(e,r,t[r]);return e},c=(e,n)=>t(e,r(n)),i=(e,t)=>{var r={};for(var s in e)a.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&o.call(e,s)&&(r[s]=e[s]);return r};import{h as u,T as p,_ as d,b as m,y as b,A as f,f as v,k as y,g as k}from"./index-0Ub2aqlv.js";import{j as h,i as P,D as O,f as _,v as E,K as g,g as j,S as A,u as w,n as R,k as I,c as x,X as C,Y as L,P as K,C as N,d as T}from"./AppWrapper-3sxv9e6a.js";function D(){const{appearance:e}=h();return null!=e?e:"light"}let F={bottom:null,top:null,left:null,right:null};function S(e=!1){const[t,r]=u(F);return P((()=>{if(e)return;const t=e=>{const t=function(e){const{type:t,data:r}=e.detail;switch(t){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":const{insets:e}=r;if(e)return c(l({},e),{bottom:e.bottom>150?0:e.bottom})}return null}(e);t&&r(t)};return O.subscribe(t),()=>{O.unsubscribe(t)}}),[e]),t}const X=e=>"object"==typeof e&&null!==e&&e.hasOwnProperty("current"),$="_AppRoot_anbkk_1",z="_AppRoot--pointer-has-not_anbkk_5",B="_AppRoot--pointer-none_anbkk_25",U={none:"vkui--sizeX-none",[A.REGULAR]:"vkui--sizeX-regular"},V={card:"vkui--layout-card",plain:"vkui--layout-plain"};const W="--vkui_internal--safe_area_inset_",M=e=>{var t=e,{children:r,mode:n="full",scroll:a="global",portalRoot:o=null,disablePortal:s,disableParentTransformForPositionFixedElements:c,className:f,safeAreaInsets:v,layout:y}=t,k=i(t,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const h=function(){const{document:e}=_(),[t,r]=u(!1),n=p((()=>{r(!0)}),[]),a=p((e=>{E(e)===g.TAB&&n()}),[n]),o=p((()=>{r(!1)}),[]),s={passive:!0,capture:!0};return j(e,"keydown",a,s),j(e,"mousedown",o,s),j(e,"touchstart",o,s),j(e,"enableKeyboardInput",n,s),j(e,"disableKeyboardInput",o,s),t}(),O=d(null),[K,N]=u(null),{document:T}=_(),F=S(Boolean(v)),M=v||F,G=D(),{hasPointer:Y,sizeX:q="none"}=w();P((()=>{let e=null;return o&&(e=X(o)?o.current:o),e||(e=T.createElement("div"),T.body.appendChild(e)),N(e),()=>{var t;o||null==(t=null==e?void 0:e.parentElement)||t.removeChild(e)}}),[o]),P((()=>{var e;if("partial"===n)return R;const t=null==(e=O.current)?void 0:e.parentElement,r=["vkui__root"].concat("embedded"===n?"vkui__root--embedded":[]);return t&&("embedded"!==n||c||(t.style.transform="translate3d(0, 0, 0)"),t.classList.add(...r)),()=>{t&&("embedded"!==n||c||(t.style.transform=""),t.classList.remove(...r))}}),[c]),P((()=>{if("full"===n)return T.documentElement.classList.add("vkui"),()=>{T.documentElement.classList.remove("vkui")}}),[T,n]),P((()=>{var e;if("partial"===n||!(null==(e=O.current)?void 0:e.parentElement))return R;const t=O.current.parentElement;let r;for(r in M)if(M.hasOwnProperty(r)&&"number"==typeof M[r]){const e=M[r];t.style.setProperty(W+r,`${e}px`),K&&K.style.setProperty(W+r,`${e}px`)}return()=>{let e;for(e in M)M.hasOwnProperty(e)&&(t.style.removeProperty(W+e),K&&K.style.removeProperty(W+e))}}),[M,K]),P((()=>{var e;if("partial"===n)return R;const t=function(e,t){const r=[];return e&&r.push(V[e]),t!==A.COMPACT&&r.push(U[t]),r}(y,q),r="embedded"===n?null==(e=O.current)?void 0:e.parentElement:T.body;return t.length&&r?(r.classList.add(...t),()=>{r.classList.remove(...t)}):R}),[q,y]),P((()=>"full"!==n||void 0===G?R:(T.documentElement.style.setProperty("color-scheme",G),()=>T.documentElement.style.removeProperty("color-scheme"))),[G]);const H=m((()=>"contain"===a?C:L),[a]),J=b(I.Provider,{value:{appRoot:O,portalRoot:K,embedded:"embedded"===n,keyboardInput:h,mode:n,disablePortal:s,layout:y}},b(H,{elRef:O},r));return"partial"===n?J:b("div",l({ref:O,className:x($,void 0===Y?B:!Y&&z,f)},k),J)};function G(e){const t=d(e);var r,n;return r=t.current,n=e,Object.keys(r).length===Object.keys(n).length&&Object.keys(r).every((e=>r[e]===n[e]))||(t.current=e),t.current}const Y=(e,t)=>{let r;switch(e){case K.ANDROID:r="vkBase";break;case K.IOS:r="vkIOS";break;case K.VKCOM:r="vkCom";break;default:r=e}return`vkui--${r}--${t}`},q=({children:e,platform:t,appearance:r})=>b(k,null,f.map(e,(e=>v(e)?y(e,{className:x(e.props.className,Y(t,r))}):e)));function H(e){var t=e,{children:r}=t,n=i(t,["children"]);const a=h(),o=G(l(l({},a),n));return b(N.Provider,{value:o},r)}const J=({appearance:e,children:t})=>{const r=T();return b(H,{appearance:e},b(q,{platform:r,appearance:e},t))};export{J as A,q as T,G as a,M as b,Y as g,X as i,D as u};
