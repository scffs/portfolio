import{_ as t,h as e,j as n,i as o,r as i,w as a,a4 as r,l,k as s,e as d,a5 as u,a6 as c,a7 as v,a8 as p,c as h,f,m,a9 as g,O as M,aa as E,ab as y,ac as k,P as S,ad as x,ae as R,af as C,Y as w,d as T,W as O,ag as P,E as A,ah as Y,I as F,J as b,K as _,a3 as D,ai as H}from"./index-73415115.js";import{M as I,b as j,a as L}from"./App-71662d86.js";import{g as G}from"./getNavId-aa412334.js";import{t as N,u as q,a as B}from"./useWaitTransitionFinish-8d23fc7b.js";function K(t){return"function"==typeof t}var z=u.join(),V=function(u){var p=u.Component,h=void 0===p?"div":p,f=u.onClose,m=u.restoreFocus,g=void 0===m||m,M=u.timeout,E=void 0===M?0:M,y=u.getRootRef,k=u.children,S=t(u,["Component","onClose","restoreFocus","timeout","getRootRef","children"]),x=e(y),R=n(),C=R.document,w=R.window,T=o(i.useState(null),2),O=T[0],P=T[1],A=o(i.useState(null),2),Y=A[0],F=A[1],b=i.useContext(a).keyboardInput,_=r((function(){var t,e;b&&!(null===(t=x.current)||void 0===t?void 0:t.contains(C.activeElement))&&(null===(e=O)||void 0===e?void 0:e.length)&&O[0].focus()}),E);l((function(){_.set()}),[]),l((function(){if(x.current){var t=[];Array.prototype.forEach.call(x.current.querySelectorAll(z),(function(e){var n=w.getComputedStyle(e),o=n.display,i=n.visibility;"none"!==o&&"hidden"!==i&&t.push(e)})),0===t.length&&t.push(x.current),P(t)}}),[k]);var D=r((function(){Y&&Y.focus()}),E);l((function(){if(g&&C.activeElement)return F(C.activeElement),function(){D.set()}}),[g]);return s(C,"keydown",(function(t){var e;if(c(t)===v.TAB&&(null===(e=O)||void 0===e?void 0:e.length)){var n=O.length-1,o=O.findIndex((function(e){return e===t.target})),i=-1===o||o===n&&!t.shiftKey;if(i||0===o&&t.shiftKey){t.preventDefault();var a=O[i?0:n];return a!==C.activeElement&&a.focus(),!1}}return f&&c(t)===v.ESCAPE&&f(),!0}),{capture:!0}),i.createElement(h,d({tabIndex:-1,ref:x},S),k)};function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o,i,a=J(t);if(e){var r=J(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return o=this,!(i=n)||"object"!==p(i)&&"function"!=typeof i?U(o):i}}var X,Z;function $(t,e){if("setActive"===e.type&&e.id!==t.activeModal){var n=e.id,o=t.exitingModal||t.activeModal,i=t.history?g(t.history):[],a=Boolean(n&&i.includes(n));return null===n?i=[]:a?i=i.splice(0,i.indexOf(n)+1):i.push(n),{activeModal:n,enteringModal:null,exitingModal:o,history:i,isBack:a}}return"entered"===e.type&&e.id===t.enteringModal?h(d({},t),{enteringModal:null}):"exited"===e.type&&e.id===t.exitingModal?h(d({},t),{exitingModal:null}):"inited"===e.type&&e.id===t.activeModal?h(d({},t),{enteringModal:e.id}):t}function tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:M,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:M,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M,c=i.useRef({}).current;(function(t){return i.Children.toArray(t)})(e).forEach((function(t){var e=t.props,n=G(e),o=void 0!==n&&c[n]||{id:null!=n?n:null};o.onOpen=t.props.onOpen,o.onOpened=t.props.onOpened,o.onClose=t.props.onClose,o.onClosed=t.props.onClosed,"number"==typeof e.settlingHeight&&(o.settlingHeight=e.settlingHeight),null!==o.id&&(c[o.id]=o)}));var v=t&&!c[t]?null:t,p=o(i.useReducer($,{activeModal:v,enteringModal:null,exitingModal:null,history:v?[v]:[],isBack:!1}),2),f=p[0],m=p[1];l((function(){m({type:"setActive",id:null!=v?v:null})}),[t]),l((function(){f.activeModal&&(u(c[f.activeModal]),m({type:"inited",id:f.activeModal}))}),[f.activeModal]);var g=function(t){var e;return null!=t&&(null===(e=c[t])||void 0===e?void 0:e.type)===X.CARD},E=i.useCallback((function(t){if(t){var e=c[t];K(e.onOpened)?e.onOpened():K(a)&&a(t)}m({type:"entered",id:t})}),[c,a]),y=i.useCallback((function(t){if(t){var e=c[t];K(e.onClosed)?e.onClosed():K(s)&&s(t)}m({type:"exited",id:t})}),[c,s]),k=Boolean(f.exitingModal&&(g(t)||g(f.exitingModal))),S=i.useCallback((function(t){return t?c[t]:void 0}),[c]);return h(d({onEnter:function(){var t=f.activeModal&&c[f.activeModal];t&&(K(t.onOpen)?t.onOpen():K(n)&&t.id&&n(t.id))},onEntered:E,onExit:function(){var t=f.activeModal&&c[f.activeModal];t&&(K(t.onClose)?t.onClose():K(r)&&t.id&&r(t.id))},onExited:y},f),{delayEnter:k,getModalState:S})}(Z=X||(X={})).PAGE="page",Z.CARD="card";var et,nt,ot=(et="ModalRoot",nt=new Set,function(t){nt.has(t)||(nt.add(t),"%c[VKUI/".concat(et,"] ").concat(t))});function it(t,e){return!!e&&(t>=e[0]&&t<=e[1])}function at(t){return R(t,0,98)}var rt,lt=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(o,i.Component);var n=Q(o);function o(e){var a,r;return P(this,o),a=n.call(this,e),f(U(a),"documentScrolling",!1),f(U(a),"maskElementRef",void 0),f(U(a),"viewportRef",i.createRef()),f(U(a),"maskAnimationFrame",void 0),f(U(a),"modalRootContext",void 0),f(U(a),"frameIds",void 0),f(U(a),"restoreFocusTo",void 0),f(U(a),"preventTouch",(function(t){if(!t)return!1;for(;t.originalEvent;)t=t.originalEvent;return t.preventDefault&&t.preventDefault(),!1})),f(U(a),"updateModalHeight",(function(){var t=a.props.getModalState(a.props.activeModal);t&&t.type===X.PAGE&&(a.props.enteringModal?a.waitTransitionFinish(t,(function(){requestAnimationFrame((function(){return a.checkPageContentHeight()}))})):requestAnimationFrame((function(){return a.checkPageContentHeight()})))})),f(U(a),"onTouchMove",(function(t){if(!a.props.exitingModal){var e=a.props.getModalState(a.props.activeModal);if(e)return e.type===X.PAGE?a.onPageTouchMove(t,e):e.type===X.CARD?a.onCardTouchMove(t,e):void 0}})),f(U(a),"onTouchEnd",(function(t){var e,n,o=a.props.getModalState(a.props.activeModal);return(null===(e=o)||void 0===e?void 0:e.type)===X.PAGE?a.onPageTouchEnd(t,o):(null===(n=o)||void 0===n?void 0:n.type)===X.CARD?a.onCardTouchEnd(t,o):void 0})),f(U(a),"onScroll",(function(t){var e,n,o,i=a.props.activeModal,r=t.target;if(i){var l=a.props.getModalState(i);(null===(e=l)||void 0===e?void 0:e.type)===X.PAGE&&(null===(o=l)||void 0===o||null===(n=o.contentElement)||void 0===n?void 0:n.contains(r))&&(l.contentScrolled=!0,l.contentScrollStopTimeout&&clearTimeout(l.contentScrollStopTimeout),l.contentScrollStopTimeout=setTimeout((function(){l.contentScrolled&&(l.contentScrolled=!1)}),250))}})),a.state={touchDown:!1,dragging:!1,modalOpenedLog:[]},a.maskElementRef=i.createRef(),a.modalRootContext={updateModalHeight:a.updateModalHeight,registerModal:function(e){var n=e.id,o=t(e,["id"]);return Object.assign(null!==(r=a.props.getModalState(n))&&void 0!==r?r:{},o)},onClose:function(){return a.props.onExit()},isInsideModal:!0},a.frameIds={},a}return k(o,[{key:"timeout",get:function(){return this.props.platform===S.IOS?400:320}},{key:"document",get:function(){return this.props.document}},{key:"window",get:function(){return this.props.window}},{key:"getModals",value:function(){return i.Children.toArray(this.props.children)}},{key:"componentDidMount",value:function(){var t;null===(t=this.window)||void 0===t||t.addEventListener("resize",this.updateModalHeight,!1)}},{key:"componentWillUnmount",value:function(){this.toggleDocumentScrolling(!0),this.window.removeEventListener("resize",this.updateModalHeight,!1)}},{key:"componentDidUpdate",value:function(t){var e=this;if(this.props.exitingModal&&this.props.exitingModal!==t.exitingModal&&this.closeModal(this.props.exitingModal),this.props.enteringModal&&this.props.enteringModal!==t.enteringModal){var n,o=this.props.enteringModal,i=this.props.getModalState(o);this.props.onEnter(),this.waitTransitionFinish(i,(function(){var t;(null===(t=i)||void 0===t?void 0:t.innerElement)&&(i.innerElement.style.transitionDelay=""),e.props.onEntered(o)})),(null===(n=i)||void 0===n?void 0:n.innerElement)&&(i.innerElement.style.transitionDelay=this.props.delayEnter?"".concat(this.timeout,"ms"):"",this.animateTranslate(i,i.translateY))}this.props.activeModal&&!t.activeModal&&(this.restoreFocusTo=this.document.activeElement),this.props.activeModal||this.props.exitingModal||!this.restoreFocusTo||(this.restoreFocusTo.focus(),this.restoreFocusTo=null),this.toggleDocumentScrolling(!this.props.activeModal&&!this.props.exitingModal)}},{key:"toggleDocumentScrolling",value:function(t){this.documentScrolling!==t&&(this.documentScrolling=t,t?this.window.removeEventListener("touchmove",this.preventTouch,{passive:!1}):this.window.addEventListener("touchmove",this.preventTouch,{passive:!1}))}},{key:"checkPageContentHeight",value:function(){var t,e,n=this.props.getModalState(this.props.activeModal);if((null===(t=n)||void 0===t?void 0:t.type)===X.PAGE&&(null===(e=n)||void 0===e?void 0:e.modalElement)){var o=d({},n);dt(n);var i=d({},n),a=!1;o.expandable===i.expandable?o.translateYFrom!==i.translateYFrom&&(a=!0):a=!0,a&&this.animateTranslate(n,n.translateY)}}},{key:"closeModal",value:function(t){var e,n,o=this;this.setState({touchDown:!1});var i=this.props.getModalState(t);if(i){this.state.modalOpenedLog.length||this.setState((function(e){return{modalOpenedLog:g(e.modalOpenedLog).concat([t])}}));var a,r,l,s=this.props.getModalState(this.props.activeModal),d=!!s&&s.type===X.PAGE,u=!!i&&i.type===X.PAGE;this.waitTransitionFinish(i,(function(){return o.props.onExited(t)}));var c=u&&d&&(null!==(a=i.translateY)&&void 0!==a?a:0)<=(null!==(r=null===(e=s)||void 0===e?void 0:e.translateYFrom)&&void 0!==r?r:0)&&!this.props.isBack?(null!==(l=null===(n=s)||void 0===n?void 0:n.translateYFrom)&&void 0!==l?l:0)+10:100;this.animateTranslate(i,c),s?s.id&&!this.state.modalOpenedLog.includes(s.id)&&(s.translateY=void 0,this.setState((function(t){return{modalOpenedLog:g(t.modalOpenedLog).concat([s.id])}}))):(this.setMaskOpacity(i,0),this.setState({modalOpenedLog:[]}),i.translateY=void 0)}else t&&ot("closeActiveModal: модальное окно (страница) ".concat(t," не существует"),"error")}},{key:"onPageTouchMove",value:function(t,e){var n,o,i=t.shiftY,a=t.originalEvent,r=a.target;if(t.isY){if(!(null===(n=e.innerElement)||void 0===n?void 0:n.contains(r)))return a.preventDefault();a.stopPropagation();var l,s,d=e.expandable,u=e.contentScrolled,c=e.collapsed,v=e.expanded;if(!this.state.touchDown)e.touchStartContentScrollTop=null!==(s=null===(l=e.contentElement)||void 0===l?void 0:l.scrollTop)&&void 0!==s?s:0,this.setState({touchDown:!0});if(!u&&(null===e.touchMovePositive&&(e.touchMovePositive=i>0),!e.expandable||c||v&&e.touchMovePositive&&0===e.touchStartContentScrollTop||(null===(o=e.headerElement)||void 0===o?void 0:o.contains(r)))){if(a.preventDefault(),!d&&i<0||!this.window)return;!this.state.dragging&&this.setState({dragging:!0});var p,h=i/this.window.innerHeight*100,f=x(h,72,.8,this.props.platform!==S.IOS);e.touchShiftYPercent=h,e.translateYCurrent=at((null!==(p=e.translateY)&&void 0!==p?p:0)+f),this.animateTranslate(e,e.translateYCurrent),this.setMaskOpacity(e)}}else{var m;(null===(m=this.viewportRef.current)||void 0===m?void 0:m.contains(r))&&a.preventDefault()}}},{key:"onCardTouchMove",value:function(t,e){var n,o=t.originalEvent,i=t.shiftY,a=o.target;if(null===(n=e.innerElement)||void 0===n?void 0:n.contains(a)){this.state.touchDown||this.setState({touchDown:!0,dragging:!0});var r,l=i/e.innerElement.offsetHeight*100,s=x(l,72,1.2,this.props.platform!==S.IOS);e.touchShiftYPercent=l,e.translateYCurrent=Math.max(0,(null!==(r=e.translateY)&&void 0!==r?r:0)+s),this.animateTranslate(e,e.translateYCurrent),this.setMaskOpacity(e)}}},{key:"onPageTouchEnd",value:function(t,e){var n,o=this,i=t.startY,a=t.shiftY;if(e.contentScrolled=!1,e.touchMovePositive=null,this.state.dragging&&this.window){var r,l,s,d,u=(i+a)/this.window.innerHeight*100,c=null!==(r=e.translateYCurrent)&&void 0!==r?r:0;if(c=at(c+c/t.duration*240*.6*((null!==(l=e.touchShiftYPercent)&&void 0!==l?l:0)<0?-1:1)),100!==e.settlingHeight)if(it(c,e.expandedRange))c=null!==(d=null===(s=e.expandedRange)||void 0===s?void 0:s[0])&&void 0!==d?d:0;else if(it(c,e.collapsedRange)){var v;c=null!==(v=e.translateYFrom)&&void 0!==v?v:0}else if(it(c,e.hiddenRange))c=100;else{var p;c=null!==(p=e.translateYFrom)&&void 0!==p?p:0}else c=it(c,[0,25])?0:100;100!==c&&u>=75&&(c=100),e.translateY=c,e.translateYCurrent=c,e.collapsed=c>0&&c<u,e.expanded=0===c,e.hidden=100===c,e.hidden&&this.props.onExit(),n=function(){e.hidden||o.animateTranslate(e,e.translateY),o.setMaskOpacity(e)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"onCardTouchEnd",value:function(t,e){var n,o=t.duration,i=this;if(this.state.dragging){var a,r,l=null!==(a=e.translateYCurrent)&&void 0!==a?a:0,s=l/o*240*.6*((null!==(r=e.touchShiftYPercent)&&void 0!==r?r:0)<0?-1:1);l=(l=Math.max(0,l+s))>=30?100:0,e.translateY=l,e.hidden=100===l,e.hidden&&this.props.onExit(),n=function(){e.hidden||i.animateTranslate(e,e.translateY),i.setMaskOpacity(e)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"waitTransitionFinish",value:function(t,e){if(N.supported){var n,o,i=function(){var n,o;null===(o=t)||void 0===o||null===(n=o.innerElement)||void 0===n||n.removeEventListener(N.name,i),e()};null===(o=t)||void 0===o||null===(n=o.innerElement)||void 0===n||n.addEventListener(N.name,i)}else setTimeout(e,this.timeout)}},{key:"animateTranslate",value:function(t,e){var n="animateTranslateFrame".concat(t.id);cancelAnimationFrame(this.frameIds[n]),this.frameIds[n]=requestAnimationFrame((function(){var n,o;n=t.innerElement,o="translate3d(0, ".concat(e,"%, 0)"),n&&(n.style.transform=o,n.style.webkitTransform=o)}))}},{key:"setMaskOpacity",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this;null===n&&(null===(e=this.props.history)||void 0===e?void 0:e[0])!==t.id||(this.maskAnimationFrame&&cancelAnimationFrame(this.maskAnimationFrame),this.maskAnimationFrame=requestAnimationFrame((function(){if(o.maskElementRef.current){var e=t.translateY,i=void 0===e?0:e,a=t.translateYCurrent,r=null===n?1-((void 0===a?0:a)-i)/(100-i)||0:n;o.maskElementRef.current.style.opacity=R(r,0,100).toString()}})))}},{key:"render",value:function(){var t,e=this,n=this.props,o=n.activeModal,a=n.exitingModal,r=n.enteringModal,l=this.state,s=l.touchDown,u=l.dragging;return o||a?i.createElement(C.Provider,{value:!0},i.createElement(I.Provider,{value:this.modalRootContext},i.createElement(w,{className:T("vkuiModalRoot",(null===(t=this.props.configProvider)||void 0===t?void 0:t.webviewType)===O.VKAPPS&&"vkuiModalRoot--vkapps",s&&T("vkuiModalRoot--touched","vkuiInternalModalRoot--touched"),!(!r&&!a)&&T("vkuiModalRoot--switching","vkuiInternalModalRoot--switching")),onMove:this.onTouchMove,onEnd:this.onTouchEnd,onScroll:this.onScroll},i.createElement("div",{className:"vkuiModalRoot__mask",onClick:this.props.onExit,ref:this.maskElementRef}),i.createElement("div",{className:"vkuiModalRoot__viewport",ref:this.viewportRef},this.getModals().map((function(t){var n=G(t.props),r=e.props.getModalState(n);if(n!==o&&n!==a||!r)return null;var l=d({},r),s=l.type===X.PAGE,c="modal-".concat(n);return i.createElement(V,{key:c,getRootRef:function(t){var o=e.props.getModalState(n);o&&(o.modalElement=t)},onClose:e.props.onExit,timeout:e.timeout,className:T("vkuiModalRoot__modal",u&&"vkuiInternalModalRoot__modal--dragging",s&&l.expandable&&"vkuiInternalModalRoot__modal--expandable",s&&l.collapsed&&"vkuiInternalModalRoot__modal--collapsed"),restoreFocus:!1},t)})))))):null}}]),o}(),st=function(t,e,n){return function(o){var a=i.useContext(e);return i.createElement(t,h(d({},o),f({},n,a)))}}((rt=y(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return function(e){return function(n){var o=tt(n.activeModal,n.children,n.onOpen,n.onOpened,n.onClose,n.onClosed,t);return i.createElement(e,d({},n,o))}}}((function(t){switch(t.type){case X.PAGE:return t.settlingHeight=t.settlingHeight||75,dt(t);case X.CARD:return function(t){t.translateY=0}(t)}}))(lt)),function(t){var e=m().platform;return i.createElement(rt,h(d({},t),{platform:e}))}),E,"configProvider");function dt(t){var e,n,o,i=t.contentElement,a=(null===(e=i)||void 0===e?void 0:e.firstElementChild).offsetHeight,r=t.translateY;t.expandable=a>(null!==(o=null===(n=i)||void 0===n?void 0:n.clientHeight)&&void 0!==o?o:0)||100===t.settlingHeight||t.expanded;var l,s,d,u,c,v=!1,p=!1;if(t.expandable){var h,f=(l=100-(null!==(h=t.settlingHeight)&&void 0!==h?h:0))/2,m=100-l;d=[0,f],u=[f,l+m/4],c=[l+m/4,100],v=l>0,p=l<=0,s=l}else{var g,M,E,y,k;d=[s=l=100-(a+(null!==(y=null===(g=t.headerElement)||void 0===g?void 0:g.offsetHeight)&&void 0!==y?y:0))/(null!==(k=null===(E=t.innerElement)||void 0===E||null===(M=E.parentElement)||void 0===M?void 0:M.offsetHeight)&&void 0!==k?k:0)*100,s+25],u=[s+25,s+25],c=[s+25,s+100]}(t.expandable&&s>(null!=r?r:100)||100===t.settlingHeight)&&(s=0),0===s&&(p=!0,v=!1),t.expandedRange=d,t.collapsedRange=u,t.hiddenRange=c,t.translateY=s,t.translateYFrom=l,t.collapsed=v,t.expanded=p}var ut=function(e){var o,a=e.activeModal,r=e.children,l=e.onOpen,s=e.onOpened,d=e.onClose,u=e.onClosed,c=i.useRef(null),v=i.useRef(void 0),p=i.useRef(void 0),h=n().document,f=m(),g=f.webviewType,E=f.platform,y=tt(a,r,l,s,d,u,M),k=y.activeModal,x=y.exitingModal,C=y.onExit,w=y.getModalState,P=y.enteringModal,Y=y.onEnter,F=y.onEntered,b=y.onExited,_=y.history,D=y.delayEnter,H=q().waitTransitionFinish,j=B({exitingModal:x,enteringModal:P,activeModal:k}),L=A({updateModalHeight:function(){},registerModal:function(e){var n=e.id,i=t(e,["id"]);return Object.assign(null!==(o=w(n))&&void 0!==o?o:{},i)},onClose:C,isInsideModal:!0}),N=E===S.IOS?400:320,K=i.Children.toArray(r),z=function(t,e){var n;(null===(n=t)||void 0===n?void 0:n.innerElement)&&(t.innerElement.style.transition="",t.innerElement.style.transitionDelay=e&&D?"".concat(N,"ms"):"",t.innerElement.style.opacity=e?"1":"0")},U=function(t){var e=w(t);e&&(k?b(t):requestAnimationFrame((function(){var n;H(null===(n=e)||void 0===n?void 0:n.innerElement,(function(){return b(t)}),N),z(e,!1),function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&(null===(e=_)||void 0===e?void 0:e[0])!==t.id||(v.current&&cancelAnimationFrame(v.current),v.current=requestAnimationFrame((function(){if(c.current){var e=t.translateY,o=void 0===e?0:e,i=t.translateYCurrent,a=null===n?1-((void 0===i?0:i)-o)/(100-o)||0:n;c.current.style.opacity=R(a,0,100).toString()}})))}(e,0)})))};return i.useEffect((function(){if(j){var t,e;if(x&&x!==j.exitingModal&&U(x),P&&P!==j.enteringModal&&function(){var t;if(P&&j){var e=w(P);Y(),j.exitingModal?((null===(t=e)||void 0===t?void 0:t.innerElement)&&(e.innerElement.style.transition="none",e.innerElement.style.opacity="1"),F(P)):requestAnimationFrame((function(){var t;P==P&&(H(null===(t=e)||void 0===t?void 0:t.innerElement,(function(){return F(P)}),N),z(e,!0))}))}}(),k&&!j.activeModal)p.current=null!==(e=null===(t=h)||void 0===t?void 0:t.activeElement)&&void 0!==e?e:void 0;k||x||!p.current||(p.current.focus(),p.current=void 0)}})),k||x?i.createElement(I.Provider,{value:L},i.createElement("div",{className:T("vkuiModalRoot",g===O.VKAPPS&&"vkuiModalRoot--vkapps","vkuiModalRoot--desktop")},i.createElement("div",{className:"vkuiModalRoot__mask",ref:c,onClick:C}),i.createElement("div",{className:"vkuiModalRoot__viewport"},K.map((function(t){var e=G(t.props);if(e!==k&&e!==x)return null;var n="modal-".concat(e);return i.createElement(V,{restoreFocus:!1,onClose:C,timeout:N,key:n,className:"vkuiModalRoot__modal"},t)}))))):null},ct=function(t){var e=j().isDesktop;Y(!!t.activeModal);var n=e?ut:st;return i.createElement(n,t)};const vt=i.lazy((()=>F((()=>import("./FullstackModal-29449dfe.js")),["assets/FullstackModal-29449dfe.js","assets/index-73415115.js","assets/index-152d0029.css","assets/App-71662d86.js","assets/getNavId-aa412334.js","assets/PanelHeaderButton-a05aa34b.js","assets/Subhead-17d46f5a.js","assets/useWaitTransitionFinish-8d23fc7b.js"]))),pt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const t=b(),{modal:e}=L();return _.jsx(D,{id:"test",children:_.jsx(ct,{activeModal:e,onClose:()=>t.hideModal(),children:_.jsx(vt,{id:H})})})}},Symbol.toStringTag,{value:"Module"}));export{X as M,pt as i};
