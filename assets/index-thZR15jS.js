var e=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,n,i)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[n]=i,l=(e,a)=>{for(var n in a||(a={}))r.call(a,n)&&o(e,n,a[n]);if(i)for(var n of i(a))t.call(a,n)&&o(e,n,a[n]);return e},s=(e,i)=>a(e,n(i)),_=(e,a)=>{var n={};for(var o in e)r.call(e,o)&&a.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&i)for(var o of i(e))a.indexOf(o)<0&&t.call(e,o)&&(n[o]=e[o]);return n};import{y as c,F as p,q as d,h as v,_ as u,p as w,A as m,T as f,u as h}from"./index-0Ub2aqlv.js";import{a1 as b,at as k,f as V,aL as g,j as y,d as B,P as O,i as P,n as x,t as S,m as T,T as C,c as H,h as N,a2 as I,u as j,S as M,N as E}from"./AppWrapper-3sxv9e6a.js";import{g as W,f as X,h as A,i as L,j as z,e as K,P as $}from"./App-hRCpH3Aa.js";import{N as D}from"./Group-AvjP2i5y.js";import{a as F}from"./AppearanceProvider-3wdIAIiT.js";import{i as G}from"./react_utils-DF5wy2IO.js";import{T as Z}from"./Title-iT2OyS_l.js";var q=b("Icon28ArrowLeftOutline","arrow_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_left_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path fill="currentColor" fill-rule="nonzero" d="M12.293 6.293a1 1 0 0 1 1.414 1.414L8.414 13H22a1 1 0 0 1 .993.883L23 14a1 1 0 0 1-1 1H8.414l5.293 5.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0l-7-7-.073-.082A1.005 1.005 0 0 1 5 14l.004.09A1.006 1.006 0 0 1 5 14.02V14a1.02 1.02 0 0 1 .125-.484.878.878 0 0 1 .071-.111.999.999 0 0 1 .097-.112l-.08.09c.025-.031.051-.062.08-.09Z" /></g></symbol>',28,28,!1,void 0),J=b("Icon28ChevronBack","chevron_back_28","0 0 20 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 28" id="chevron_back_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v28H0z" /><path fill="currentColor" d="M4.56 12.94 13 4.5a1.414 1.414 0 0 1 2 2L7.5 14l7.5 7.5a1.414 1.414 0 0 1-2 2l-8.44-8.44a1.5 1.5 0 0 1 0-2.12" /></g></symbol>',20,28,!1,void 0),Q=b("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chevron_left_outline_28"><path fill="currentColor" d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" /></symbol>',28,28,!1,void 0);const R=p({entering:!1}),U=({children:e,entering:a})=>{const n=d(R),i=F({entering:n.entering||a});return c(R.Provider,{value:i},e)},Y=p(void 0),ee=({children:e,isBack:a})=>{const n=d(Y),i=void 0!==a?a:n,[r]=v(i);return c(Y.Provider,{value:r},e)};const ae=(e,a,n)=>({swipedToOpposite:a<0,swipeBackTriggered:a>=10,viewportStartEdgeTouched:e<=20,viewportEndEdgeTouched:e>=n-20}),ne={View:"_View_9hasv_1","View--animated":"_View--animated_9hasv_8","View--swiping-back":"_View--swiping-back_9hasv_9",View__panel:"_View__panel_9hasv_13",View__header:"_View__header_9hasv_14",View__panels:"_View__panels_9hasv_20","View__panel-in":"_View__panel-in_9hasv_33","View__panel-overlay":"_View__panel-overlay_9hasv_45","View--ios":"_View--ios_9hasv_61","View__panel--swipe-back-prev":"_View__panel--swipe-back-prev_9hasv_61","View__panel--swipe-back-success":"_View__panel--swipe-back-success_9hasv_61","View__panel--swipe-back-next":"_View__panel--swipe-back-next_9hasv_66","View__panel--swipe-back-failed":"_View__panel--swipe-back-failed_9hasv_71","View__panel--next":"_View__panel--next_9hasv_94","View__panel--prev":"_View__panel--prev_9hasv_94","animation-view-prev-back":"_animation-view-prev-back_9hasv_1","animation-view-next-forward":"_animation-view-next-forward_9hasv_1","View--no-motion":"_View--no-motion_9hasv_102","animation-ios-prev-forward":"_animation-ios-prev-forward_9hasv_1","animation-ios-next-back":"_animation-ios-next-back_9hasv_1","animation-ios-next-forward":"_animation-ios-next-forward_9hasv_1","animation-ios-prev-back":"_animation-ios-prev-back_9hasv_1","animation-ios-fade-in":"_animation-ios-fade-in_9hasv_1","animation-ios-fade-out":"_animation-ios-fade-out_9hasv_1","View__panel--active":"_View__panel--active_9hasv_173"};var ie,re;(re=ie||(ie={}))[re.fail=1]="fail",re[re.success=2]="success";let te={};const oe=e=>{var a=e,{activePanel:n,history:i,nav:r,onTransition:t,onSwipeBack:o,onSwipeBackStart:p,onSwipeBackCancel:d,children:h,className:b}=a,I=_(a,["activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancel","children","className"]);const j=W({nav:r,id:I.id}),M=u(te[j]||{}),E=u(x);w((()=>()=>{j&&(te[j]=M.current)}));const K=u({}),{window:$,document:F}=V(),G=g(),Z=y(),q=X(),J=B(),[Q,R]=v(!1),[Y,ie]=v([n]),[re,oe]=v(n),[le,se]=v(void 0),[_e,ce]=v(null),[pe,de]=v(null),ve=u(!1),[ue,we]=v(void 0),[me,fe]=v(0),[he,be]=v(0),[ke,Ve]=v(null),[ge,ye]=v(null),[Be,Oe]=v(null),[Pe,xe]=v(!1),Se=A(n),Te=A(ue),Ce=A(Pe),He=A(Be),Ne=A(ge),Ie=A(t),je=m.toArray(h).filter((e=>{const a=W(e.props);return void 0!==a&&Y.includes(a)||a===ge||a===ke})),Me=!Z.transitionMotionEnabled||!q.animate||J===O.VKCOM,Ee=!Me&&J===O.IOS&&Z.isWebView&&Boolean(o),We=e=>null===e?null:K.current[e],Xe=f(((e,a)=>{a&&(M.current[e]=0),ce(null),de(null),ie([n]),oe(n),R(!1),se(a),E.current=()=>{null==G||G.scrollTo(0,a?M.current[n]:0),t&&t({isBack:a,from:e,to:n})}}),[n,t,G]);P((()=>{E.current(),E.current=x}),[E.current]);const Ae=f((e=>{e&&![ne["animation-ios-next-forward"],ne["animation-ios-prev-back"],ne["animation-view-next-forward"],ne["animation-view-prev-back"]].includes(e.animationName)||null===_e||Xe(_e,Boolean(le))}),[Xe,le,_e]),{waitTransitionFinish:Le}=L(),ze=S(Ae,J===O.IOS?600:300),Ke=f((()=>{o&&o()}),[o]),$e=f((()=>{d&&d(),ye(null),Ve(null),we(!1),Oe(null),fe(0),be(0)}),[d]),De=f((e=>{if(!e||(null==e?void 0:e.propertyName.includes("transform"))&&(null==e?void 0:e.target)===We(ke))switch(Be){case 1:$e();break;case 2:Ke()}}),[$e,Ke,ke,Be]),Fe=e=>{if(!N||!$)return{};const a=e===ge,n=e===ke;if(!a&&!n||Be)return{};let i=`${he}px`,r=100*he/$.innerWidth/2-50+"%";return n?{transform:`translate3d(${r}, 0, 0)`,WebkitTransform:`translate3d(${r}, 0, 0)`}:a?{transform:`translate3d(${i}, 0, 0)`,WebkitTransform:`translate3d(${i}, 0, 0)`}:{}},Ge=e=>{if(!N||!$)return{};if(!(e===ke))return{};const a=1-he/$.innerWidth,n=2===Be?0:1===Be?1:null;return{display:"block",opacity:null===n?a:n}};return w((()=>{if(Se&&Se!==n&&!Te&&!Ce){const e=m.toArray(h).map((e=>W(e.props))).find((e=>e===Se||e===n))===n;M.current[Se]=null==G?void 0:G.getScroll().y,Me?Xe(Se,e):(T(F),ie([Se,n]),ce(Se),de(n),oe(null),R(!0),se(e),z.supported||ze.set())}if(Se&&Se!==n&&Te){const e=n,a=Se;Ne&&(M.current[Ne]=0),ye(null),Ve(null),we(!1),Oe(null),fe(0),be(0),oe(e),ie([e]),se(!0),E.current=()=>{null!==e&&(null==G||G.scrollTo(0,M.current[e])),Ie&&Ie({isBack:!0,from:a,to:e})}}!He&&Be&&Le(We(ke),De,J===O.IOS?600:300),1!==He||Be||null===re||null==G||G.scrollTo(0,M.current[re]),Se!==n&&Pe&&(xe(!1),de(null),ce(null),R(!1),ie([n]),oe(n))}),[n,re,ze,Pe,h,Me,F,Xe,J,Se,Ce,Ie,Ne,He,Te,G,ke,Be,De,Le]),c(D.Provider,{value:j},c(C,s(l({Component:"section"},I),{className:H(ne.View,J===O.IOS&&H(ne["View--ios"],"vkuiInternalView--ios"),!Me&&Q&&ne["View--animated"],!Me&&ue&&ne["View--swiping-back"],Me&&ne["View--no-motion"],b),onMoveX:Ee?e=>{if(ve.current||function(e){var a;const n=e.originalEvent.target;return Boolean(null==(a=null==n?void 0:n.closest)?void 0:a.call(n,"input, textarea, [data-vkui-swipe-back=false]"))}(e))return;const{swipedToOpposite:a,swipeBackTriggered:n,viewportStartEdgeTouched:r}=ae(e.startX,e.shiftX,$.innerWidth);if(!Q||!n){if(!ue&&i&&i.length>1){if(a)return void(ve.current=!0);if(!n)return;if(!r&&(t=e.originalEvent.target,k(t).some((e=>"scrollLeft"in e&&e.scrollLeft>0))))return void(ve.current=!0);if(p){if("prevent"===p(re))return void(ve.current=!0)}null!==re&&(T(F),M.current[re]=null==G?void 0:G.getScroll().y),we(!0),fe(e.startX),ye(re),Ve(i.slice(-2)[0])}var t;ue&&(e.shiftX<0?be(0):e.shiftX>$.innerWidth-me?be($.innerWidth):be(e.shiftX))}}:J===O.IOS?e=>{if(Pe)return;const{swipeBackTriggered:a,viewportStartEdgeTouched:n,viewportEndEdgeTouched:i}=ae(e.startX,e.shiftX,$.innerWidth);(n||i)&&a&&xe(!0)}:void 0,onEnd:Ee?e=>{var a;if(ve.current=!1,ue){const n=he/e.duration*1e3;0===he?$e():he>=(null!=(a=$.innerWidth)?a:0)?Ke():n>250||he>=$.innerWidth/2?Oe(2):Oe(1)}}:void 0}),c("div",{className:ne.View__panels},je.map((e=>{var a;const n=W(e.props),i=Q&&n===(le?_e:pe),r=n===_e||n===ge||n===ke||n===pe&&le;return c("div",{className:H(ne.View__panel,n===re&&ne["View__panel--active"],n===_e&&ne["View__panel--prev"],n===pe&&ne["View__panel--next"],n===ge&&ne["View__panel--swipe-back-prev"],n===ke&&ne["View__panel--swipe-back-next"],2===Be&&ne["View__panel--swipe-back-success"],1===Be&&ne["View__panel--swipe-back-failed"]),onAnimationEnd:i?Ae:void 0,ref:e=>void 0!==n&&(K.current[n]=e),style:Fe(n),key:n},J===O.IOS&&c("div",{className:ne["View__panel-overlay"],style:Ge(n)}),c("div",{className:ne["View__panel-in"],style:{marginTop:r?-(null!=(a=M.current[n])?a:0):void 0}},c(ee,{isBack:ue||le},c(U,{entering:n===pe||n===ke},e))))})))))},le="_PanelHeaderButton_etpe9_1",se="_PanelHeaderButton--primitive_etpe9_19",_e="_PanelHeaderBack--ios_etpe9_51",ce="_PanelHeaderButton--notPrimitive_etpe9_59",pe="_PanelHeaderButton--hover_etpe9_84",de="_PanelHeaderButton--active_etpe9_85",ve="_PanelHeaderBack--vkcom_etpe9_99",ue="_PanelHeaderBack--has-label_etpe9_99",we="_PanelHeaderBack--sizeX-compact_etpe9_104",me="_PanelHeaderButton__label_etpe9_109",fe={ios:"_PanelHeaderButton--ios_etpe9_29",android:"_PanelHeaderButton--android_etpe9_59",vkcom:"_PanelHeaderButton--vkcom_etpe9_75"},he=({primary:e,children:a})=>{const n=B();return n===O.IOS?c(Z,{Component:"span",level:"3",weight:e?"1":"3"},a):c(K,{weight:n===O.VKCOM?void 0:"2"},a)},be=e=>{var a=e,{children:n,primary:i=!1,label:r,className:t}=a,o=_(a,["children","primary","label","className"]);const p=G(n),d=G(r),v=B();let u,w;switch(v){case O.IOS:u="background",w="opacity";break;case O.VKCOM:u=pe,w=de;break;default:u="background",w="background"}return c(I,s(l({Component:o.href?"a":"button"},o),{hoverMode:u,activeEffectDelay:200,activeMode:w,className:H("vkuiInternalPanelHeaderButton",le,fe.hasOwnProperty(v)?fe[v]:fe.android,p&&se,!p&&!d&&ce,t)}),p?c(he,{primary:i},n):n,d?c(he,{primary:i,className:me},r):r)},ke=e=>{var a=e,{label:n,"aria-label":i="Назад",className:r}=a,t=_(a,["label","aria-label","className"]);const o=B(),{sizeX:p="none"}=j(),d=o===O.VKCOM||o===O.IOS;let v=c(q,null);switch(o){case O.IOS:v=c(J,null);break;case O.VKCOM:v=c(Q,null)}return c(be,s(l({},t),{className:H(p===M.COMPACT&&we,o===O.IOS&&_e,o===O.VKCOM&&ve,d&&!!n&&ue,r),label:d&&n,"aria-label":i}),v)},Ve=({title:e})=>{const a=E();return h($,{before:h(ke,{onClick:()=>a.back()}),children:e})};export{Ve as P,oe as V};
