var e=Object.defineProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(r,n,t)=>n in r?e(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,s=(e,s)=>{for(var a in s||(s={}))n.call(s,a)&&o(e,a,s[a]);if(r)for(var a of r(s))t.call(s,a)&&o(e,a,s[a]);return e},a=(e,o)=>{var s={};for(var a in e)n.call(e,a)&&o.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&r)for(var a of r(e))o.indexOf(a)<0&&t.call(e,a)&&(s[a]=e[a]);return s};import{l as i,F as u,k as l,P as c,L as d,X as p,W as f,A as m,j as v,y,Y as b,b as h,s as P,q as k,Z as L,$ as O,m as _}from"./index-DtoEfA3M.js";import{k as E,u as w,A as g}from"./index-WJeyMpWQ.js";function j(e){return"object"==typeof e&&null!==e}function z(e){return"function"==typeof e}function R(e,r){if(e===r)return!0;if(null==e||null==r||!j(e)&&!j(r))return e!=e&&r!=r;if(j(e)&&j(r)){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var n in e){if(!e.hasOwnProperty(n)||!r.hasOwnProperty(n))return!1;if(!R(e[n],r[n]))return!1}return!0}return!1}const x="enableKeyboardInput",A="disableKeyboardInput",I={passive:!0,capture:!0};function N(e){const r=u(e);return R(r.current,e)||(r.current=e),r.current}const $="light",C={DARK:"dark",LIGHT:"light"},D=()=>{const{platform:e,appearance:r=$,tokensClassNames:n}=c(d),t=(e=>f.ANDROID in e||f.IOS in e||f.VKCOM in e)(n)?((e,r)=>r?r[e]:void 0)(e,n):n,o=((e,r)=>r?r[e]:void 0)(r,t);return o||p[e][r]},X=({children:e})=>{const r=D();return b(e,{className:h(r,e.props.className)})},Y=({children:e})=>m.map(e,(e=>v(e)?y(X,null,e):e)),F=e=>"object"==typeof e&&null!==e&&e.hasOwnProperty("current");const K="--vkui_internal--safe_area_inset_",T=(e,r,n)=>{if(!e)return()=>{};for(const t in e)if(e.hasOwnProperty(t)&&"number"==typeof e[t]){const o=`${K}${t}`,s=e[t];r.style.setProperty(o,`${s}px`),n&&n.style.setProperty(o,`${s}px`)}return function(){for(const t in e)if(e.hasOwnProperty(t)){const e=`${K}${t}`;r.style.removeProperty(e),n&&n.style.removeProperty(e)}}},S="_AppRoot_1uy4n_1",G="_AppRoot--pointer-has-not_1uy4n_5",H="_AppRoot--pointer-none_1uy4n_25",M=e=>{var r=e,{children:n,mode:t="full",scroll:o="global",portalRoot:c=null,disablePortal:d=!1,disableParentTransformForPositionFixedElements:p,className:f,safeAreaInsets:m,layout:v}=r,b=a(r,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const{hasPointer:_,sizeX:j="none",sizeY:z="none"}=w(),R=D(),$=N(m),C=function(){const{document:e}=i(),r=u(!1);return l((()=>{if(!e)return;const n=e=>{E(e)&&(r.current=!0)},t=()=>{r.current=!0},o=()=>{r.current=!1};return e.addEventListener("keydown",n,I),e.addEventListener(x,t,I),e.addEventListener(A,o,I),e.addEventListener("mousedown",o,I),e.addEventListener("touchstart",o,I),()=>{e.removeEventListener("keydown",n,I),e.removeEventListener(x,t,I),e.removeEventListener(A,o,I),e.removeEventListener("mousedown",o,I),e.removeEventListener("touchstart",o,I)}}),[e]),r}(),X=u(null),Y=u(null);l((function(){const e=c?(e=>F(e)?e.current:e)(c):null;if(e)return Y.current=e,function(){Y.current=null};const r=P(X.current),n=r.ownerDocument.createElement("div");return r.appendChild(n),Y.current=n,function(){r.removeChild(n),Y.current=null}}),[c]),l((function(){if(!X.current||!Y.current)return;const e=(r=X.current)?r.parentElement:null;var r;const n=P(X.current).ownerDocument.documentElement,[o,s]=function({mode:e,layout:r,tokensClassName:n,sizeX:t,sizeY:o}){const s=["vkui__root"],a=[n];if("full"===e||"embedded"===e){if(r){const e={card:"vkui--layout-card",plain:"vkui--layout-plain"};a.push(e[r])}if("compact"!==t){const e={none:"vkui--sizeX-none",regular:"vkui--sizeX-regular"};a.push(e[t])}if("regular"!==o){const e={none:"vkui--sizeY-none",compact:"vkui--sizeY-compact"};a.push(e[o])}"embedded"===e&&s.push("vkui__root--embedded")}return[s,a]}({mode:t,layout:v,tokensClassName:R,sizeX:j,sizeY:z});switch(t){case"full":{e&&e.classList.add(...o),n.classList.add(...s,"vkui");const r=T($,n);return function(){e&&e.classList.remove(...o),n.classList.remove(...s,"vkui"),r()}}case"embedded":if(e){e.classList.add(...o,...s),p||e.style.setProperty("transform","translate3d(0, 0, 0)");const r=T($,e,Y.current);return function(){e.classList.remove(...o,...s),p||e.style.removeProperty("transform"),r()}}return;case"partial":return}}),[t,v,p,R,j,z,$]);const K=k((()=>"contain"===o?L:O),[o]),M=y(g.Provider,{value:{appRoot:X,portalRoot:Y,embedded:"embedded"===t,mode:t,disablePortal:d,layout:v,get keyboardInput(){return C.current}}},y(K,{elRef:X},n));return"partial"===t?M:y("div",s({ref:X,className:h(S,void 0===_?H:!_&&G,f)},b),M)};function V(e){var r=e,{children:n}=r,t=a(r,["children"]);const o=_(),i=N(s(s({},o),t));return y(d.Provider,{value:i},n)}const W=({value:e,children:r})=>y(V,{appearance:e},y(Y,null,r));export{W as A,$ as D,Y as T,C as a,M as b,z as c,F as i,N as u};
