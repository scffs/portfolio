var e=Object.defineProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(r,n,t)=>n in r?e(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,s=(e,s)=>{for(var a in s||(s={}))n.call(s,a)&&o(e,a,s[a]);if(r)for(var a of r(s))t.call(s,a)&&o(e,a,s[a]);return e},a=(e,o)=>{var s={};for(var a in e)n.call(e,a)&&o.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&r)for(var a of r(e))o.indexOf(a)<0&&t.call(e,a)&&(s[a]=e[a]);return s};import{b as i,q as u,A as l,f as c,c as d,s as p,a as f}from"./index-un9PXEE1.js";import{g as m,d as v,v as y,C as b,D as h,P,c as k,u as O,i as E,j as L,E as _,G as w,h as g}from"./AppWrapper-Ec7-caUI.js";function j(e){return"object"==typeof e&&null!==e}function z(e){return"function"==typeof e}function R(e,r){if(e===r)return!0;if(null==e||null==r||!j(e)&&!j(r))return e!=e&&r!=r;if(j(e)&&j(r)){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var n in e){if(!e.hasOwnProperty(n)||!r.hasOwnProperty(n))return!1;if(!R(e[n],r[n]))return!1}return!0}return!1}const A="enableKeyboardInput",I="disableKeyboardInput",N={passive:!0,capture:!0};function x(e){const r=i(e);return R(r.current,e)||(r.current=e),r.current}const C="light",D={DARK:"dark",LIGHT:"light"},$=()=>{const{platform:e,appearance:r=C,tokensClassNames:n}=u(b),t=(e=>P.ANDROID in e||P.IOS in e||P.VKCOM in e)(n)?((e,r)=>r?r[e]:void 0)(e,n):n,o=((e,r)=>r?r[e]:void 0)(r,t);return o||h[e][r]},X=({children:e})=>{const r=$();return p(e,{className:k(r,e.props.className)})},Y=({children:e})=>l.map(e,(e=>c(e)?d(X,null,e):e)),F=e=>"object"==typeof e&&null!==e&&e.hasOwnProperty("current");const K="--vkui_internal--safe_area_inset_",T=(e,r,n)=>{if(!e)return()=>{};for(const t in e)if(e.hasOwnProperty(t)&&"number"==typeof e[t]){const o=`${K}${t}`,s=e[t];r.style.setProperty(o,`${s}px`),n&&n.style.setProperty(o,`${s}px`)}return function(){for(const t in e)if(e.hasOwnProperty(t)){const e=`${K}${t}`;r.style.removeProperty(e),n&&n.style.removeProperty(e)}}},G="_AppRoot_1uy4n_1",S="_AppRoot--pointer-has-not_1uy4n_5",H="_AppRoot--pointer-none_1uy4n_25",M=e=>{var r=e,{children:n,mode:t="full",scroll:o="global",portalRoot:u=null,disablePortal:l=!1,disableParentTransformForPositionFixedElements:c,className:p,safeAreaInsets:b,layout:h}=r,P=a(r,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const{hasPointer:g,sizeX:j="none",sizeY:z="none"}=O(),R=$(),C=x(b),D=function(){const{document:e}=m(),r=i(!1);return v((()=>{if(!e)return;const n=e=>{y(e)&&(r.current=!0)},t=()=>{r.current=!0},o=()=>{r.current=!1};return e.addEventListener("keydown",n,N),e.addEventListener(A,t,N),e.addEventListener(I,o,N),e.addEventListener("mousedown",o,N),e.addEventListener("touchstart",o,N),()=>{e.removeEventListener("keydown",n,N),e.removeEventListener(A,t,N),e.removeEventListener(I,o,N),e.removeEventListener("mousedown",o,N),e.removeEventListener("touchstart",o,N)}}),[e]),r}(),X=i(null),Y=i(null);v((function(){const e=u?(e=>F(e)?e.current:e)(u):null;if(e)return Y.current=e,function(){Y.current=null};const r=E(X.current),n=r.ownerDocument.createElement("div");return r.appendChild(n),Y.current=n,function(){r.removeChild(n),Y.current=null}}),[u]),v((function(){if(!X.current||!Y.current)return;const e=(r=X.current)?r.parentElement:null;var r;const n=E(X.current).ownerDocument.documentElement,[o,s]=function({mode:e,layout:r,tokensClassName:n,sizeX:t,sizeY:o}){const s=["vkui__root"],a=[n];if("full"===e||"embedded"===e){if(r){const e={card:"vkui--layout-card",plain:"vkui--layout-plain"};a.push(e[r])}if("compact"!==t){const e={none:"vkui--sizeX-none",regular:"vkui--sizeX-regular"};a.push(e[t])}if("regular"!==o){const e={none:"vkui--sizeY-none",compact:"vkui--sizeY-compact"};a.push(e[o])}"embedded"===e&&s.push("vkui__root--embedded")}return[s,a]}({mode:t,layout:h,tokensClassName:R,sizeX:j,sizeY:z});switch(t){case"full":{e&&e.classList.add(...o),n.classList.add(...s,"vkui");const r=T(C,n);return function(){e&&e.classList.remove(...o),n.classList.remove(...s,"vkui"),r()}}case"embedded":if(e){e.classList.add(...o,...s),c||e.style.setProperty("transform","translate3d(0, 0, 0)");const r=T(C,e,Y.current);return function(){e.classList.remove(...o,...s),c||e.style.removeProperty("transform"),r()}}return;case"partial":return}}),[t,h,c,R,j,z,C]);const K=f((()=>"contain"===o?_:w),[o]),M=d(L.Provider,{value:{appRoot:X,portalRoot:Y,embedded:"embedded"===t,mode:t,disablePortal:l,layout:h,get keyboardInput(){return D.current}}},d(K,{elRef:X},n));return"partial"===t?M:d("div",s({ref:X,className:k(G,void 0===g?H:!g&&S,p)},P),M)};function V(e){var r=e,{children:n}=r,t=a(r,["children"]);const o=g(),i=x(s(s({},o),t));return d(b.Provider,{value:i},n)}const W=({value:e,children:r})=>d(V,{appearance:e},d(Y,null,r));export{W as A,C as D,Y as T,D as a,M as b,z as c,F as i,x as u};
