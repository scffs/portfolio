import{_ as t,h as e,j as n,i as o,v as i,a2 as a,l as r,k as l,e as s,a3 as d,a4 as u,a5 as c,a6 as v,c as p,f as h,m as f,a7 as m,M as g,a8 as M,a9 as E,aa as y,P as k,ab as S,ac as x,ad as C,U as R,d as w,W as T,ae as O,C as P,af as A,G as Y,H as F,I as b,a1 as _,ag as D}from"./index-99b15b47.js";import{r as H}from"./react-37698f52.js";import{M as I,b as j,a as L}from"./App-e440e7c4.js";import{g as G}from"./getNavId-aa412334.js";import{t as N,u as q,a as B}from"./useWaitTransitionFinish-e4f41df5.js";function K(t){return"function"==typeof t}var z=d.join(),U=function(d){var v=d.Component,p=void 0===v?"div":v,h=d.onClose,f=d.restoreFocus,m=void 0===f||f,g=d.timeout,M=void 0===g?0:g,E=d.getRootRef,y=d.children,k=t(d,["Component","onClose","restoreFocus","timeout","getRootRef","children"]),S=e(E),x=n(),C=x.document,R=x.window,w=o(H.useState(null),2),T=w[0],O=w[1],P=o(H.useState(null),2),A=P[0],Y=P[1],F=H.useContext(i).keyboardInput,b=a((function(){var t,e;F&&!(null===(t=S.current)||void 0===t?void 0:t.contains(C.activeElement))&&(null===(e=T)||void 0===e?void 0:e.length)&&T[0].focus()}),M);r((function(){b.set()}),[]),r((function(){if(S.current){var t=[];Array.prototype.forEach.call(S.current.querySelectorAll(z),(function(e){var n=R.getComputedStyle(e),o=n.display,i=n.visibility;"none"!==o&&"hidden"!==i&&t.push(e)})),0===t.length&&t.push(S.current),O(t)}}),[y]);var _=a((function(){A&&A.focus()}),M);r((function(){if(m&&C.activeElement)return Y(C.activeElement),function(){_.set()}}),[m]);return l(C,"keydown",(function(t){var e;if(u(t)===c.TAB&&(null===(e=T)||void 0===e?void 0:e.length)){var n=T.length-1,o=T.findIndex((function(e){return e===t.target})),i=-1===o||o===n&&!t.shiftKey;if(i||0===o&&t.shiftKey){t.preventDefault();var a=T[i?0:n];return a!==C.activeElement&&a.focus(),!1}}return h&&u(t)===c.ESCAPE&&h(),!0}),{capture:!0}),H.createElement(p,s({tabIndex:-1,ref:S},k),y)};function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o,i,a=J(t);if(e){var r=J(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return o=this,!(i=n)||"object"!==v(i)&&"function"!=typeof i?V(o):i}}var X,Z;function $(t,e){if("setActive"===e.type&&e.id!==t.activeModal){var n=e.id,o=t.exitingModal||t.activeModal,i=t.history?m(t.history):[],a=Boolean(n&&i.includes(n));return null===n?i=[]:a?i=i.splice(0,i.indexOf(n)+1):i.push(n),{activeModal:n,enteringModal:null,exitingModal:o,history:i,isBack:a}}return"entered"===e.type&&e.id===t.enteringModal?p(s({},t),{enteringModal:null}):"exited"===e.type&&e.id===t.exitingModal?p(s({},t),{exitingModal:null}):"inited"===e.type&&e.id===t.activeModal?p(s({},t),{enteringModal:e.id}):t}function tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:g,u=H.useRef({}).current;(function(t){return H.Children.toArray(t)})(e).forEach((function(t){var e=t.props,n=G(e),o=void 0!==n&&u[n]||{id:null!=n?n:null};o.onOpen=t.props.onOpen,o.onOpened=t.props.onOpened,o.onClose=t.props.onClose,o.onClosed=t.props.onClosed,"number"==typeof e.settlingHeight&&(o.settlingHeight=e.settlingHeight),null!==o.id&&(u[o.id]=o)}));var c=t&&!u[t]?null:t,v=o(H.useReducer($,{activeModal:c,enteringModal:null,exitingModal:null,history:c?[c]:[],isBack:!1}),2),h=v[0],f=v[1];r((function(){f({type:"setActive",id:null!=c?c:null})}),[t]),r((function(){h.activeModal&&(d(u[h.activeModal]),f({type:"inited",id:h.activeModal}))}),[h.activeModal]);var m=function(t){var e;return null!=t&&(null===(e=u[t])||void 0===e?void 0:e.type)===X.CARD},M=H.useCallback((function(t){if(t){var e=u[t];K(e.onOpened)?e.onOpened():K(i)&&i(t)}f({type:"entered",id:t})}),[u,i]),E=H.useCallback((function(t){if(t){var e=u[t];K(e.onClosed)?e.onClosed():K(l)&&l(t)}f({type:"exited",id:t})}),[u,l]),y=Boolean(h.exitingModal&&(m(t)||m(h.exitingModal))),k=H.useCallback((function(t){return t?u[t]:void 0}),[u]);return p(s({onEnter:function(){var t=h.activeModal&&u[h.activeModal];t&&(K(t.onOpen)?t.onOpen():K(n)&&t.id&&n(t.id))},onEntered:M,onExit:function(){var t=h.activeModal&&u[h.activeModal];t&&(K(t.onClose)?t.onClose():K(a)&&t.id&&a(t.id))},onExited:E},h),{delayEnter:y,getModalState:k})}(Z=X||(X={})).PAGE="page",Z.CARD="card";var et,nt,ot=(et="ModalRoot",nt=new Set,function(t){nt.has(t)||(nt.add(t),"%c[VKUI/".concat(et,"] ").concat(t))});function it(t,e){return!!e&&(t>=e[0]&&t<=e[1])}function at(t){return x(t,0,98)}var rt,lt=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(o,H.Component);var n=Q(o);function o(e){var i,a;return O(this,o),i=n.call(this,e),h(V(i),"documentScrolling",!1),h(V(i),"maskElementRef",void 0),h(V(i),"viewportRef",H.createRef()),h(V(i),"maskAnimationFrame",void 0),h(V(i),"modalRootContext",void 0),h(V(i),"frameIds",void 0),h(V(i),"restoreFocusTo",void 0),h(V(i),"preventTouch",(function(t){if(!t)return!1;for(;t.originalEvent;)t=t.originalEvent;return t.preventDefault&&t.preventDefault(),!1})),h(V(i),"updateModalHeight",(function(){var t=i.props.getModalState(i.props.activeModal);t&&t.type===X.PAGE&&(i.props.enteringModal?i.waitTransitionFinish(t,(function(){requestAnimationFrame((function(){return i.checkPageContentHeight()}))})):requestAnimationFrame((function(){return i.checkPageContentHeight()})))})),h(V(i),"onTouchMove",(function(t){if(!i.props.exitingModal){var e=i.props.getModalState(i.props.activeModal);if(e)return e.type===X.PAGE?i.onPageTouchMove(t,e):e.type===X.CARD?i.onCardTouchMove(t,e):void 0}})),h(V(i),"onTouchEnd",(function(t){var e,n,o=i.props.getModalState(i.props.activeModal);return(null===(e=o)||void 0===e?void 0:e.type)===X.PAGE?i.onPageTouchEnd(t,o):(null===(n=o)||void 0===n?void 0:n.type)===X.CARD?i.onCardTouchEnd(t,o):void 0})),h(V(i),"onScroll",(function(t){var e,n,o,a=i.props.activeModal,r=t.target;if(a){var l=i.props.getModalState(a);(null===(e=l)||void 0===e?void 0:e.type)===X.PAGE&&(null===(o=l)||void 0===o||null===(n=o.contentElement)||void 0===n?void 0:n.contains(r))&&(l.contentScrolled=!0,l.contentScrollStopTimeout&&clearTimeout(l.contentScrollStopTimeout),l.contentScrollStopTimeout=setTimeout((function(){l.contentScrolled&&(l.contentScrolled=!1)}),250))}})),i.state={touchDown:!1,dragging:!1,modalOpenedLog:[]},i.maskElementRef=H.createRef(),i.modalRootContext={updateModalHeight:i.updateModalHeight,registerModal:function(e){var n=e.id,o=t(e,["id"]);return Object.assign(null!==(a=i.props.getModalState(n))&&void 0!==a?a:{},o)},onClose:function(){return i.props.onExit()},isInsideModal:!0},i.frameIds={},i}return y(o,[{key:"timeout",get:function(){return this.props.platform===k.IOS?400:320}},{key:"document",get:function(){return this.props.document}},{key:"window",get:function(){return this.props.window}},{key:"getModals",value:function(){return H.Children.toArray(this.props.children)}},{key:"componentDidMount",value:function(){var t;null===(t=this.window)||void 0===t||t.addEventListener("resize",this.updateModalHeight,!1)}},{key:"componentWillUnmount",value:function(){this.toggleDocumentScrolling(!0),this.window.removeEventListener("resize",this.updateModalHeight,!1)}},{key:"componentDidUpdate",value:function(t){var e=this;if(this.props.exitingModal&&this.props.exitingModal!==t.exitingModal&&this.closeModal(this.props.exitingModal),this.props.enteringModal&&this.props.enteringModal!==t.enteringModal){var n,o=this.props.enteringModal,i=this.props.getModalState(o);this.props.onEnter(),this.waitTransitionFinish(i,(function(){var t;(null===(t=i)||void 0===t?void 0:t.innerElement)&&(i.innerElement.style.transitionDelay=""),e.props.onEntered(o)})),(null===(n=i)||void 0===n?void 0:n.innerElement)&&(i.innerElement.style.transitionDelay=this.props.delayEnter?"".concat(this.timeout,"ms"):"",this.animateTranslate(i,i.translateY))}this.props.activeModal&&!t.activeModal&&(this.restoreFocusTo=this.document.activeElement),this.props.activeModal||this.props.exitingModal||!this.restoreFocusTo||(this.restoreFocusTo.focus(),this.restoreFocusTo=null),this.toggleDocumentScrolling(!this.props.activeModal&&!this.props.exitingModal)}},{key:"toggleDocumentScrolling",value:function(t){this.documentScrolling!==t&&(this.documentScrolling=t,t?this.window.removeEventListener("touchmove",this.preventTouch,{passive:!1}):this.window.addEventListener("touchmove",this.preventTouch,{passive:!1}))}},{key:"checkPageContentHeight",value:function(){var t,e,n=this.props.getModalState(this.props.activeModal);if((null===(t=n)||void 0===t?void 0:t.type)===X.PAGE&&(null===(e=n)||void 0===e?void 0:e.modalElement)){var o=s({},n);dt(n);var i=s({},n),a=!1;o.expandable===i.expandable?o.translateYFrom!==i.translateYFrom&&(a=!0):a=!0,a&&this.animateTranslate(n,n.translateY)}}},{key:"closeModal",value:function(t){var e,n,o=this;this.setState({touchDown:!1});var i=this.props.getModalState(t);if(i){this.state.modalOpenedLog.length||this.setState((function(e){return{modalOpenedLog:m(e.modalOpenedLog).concat([t])}}));var a,r,l,s=this.props.getModalState(this.props.activeModal),d=!!s&&s.type===X.PAGE,u=!!i&&i.type===X.PAGE;this.waitTransitionFinish(i,(function(){return o.props.onExited(t)}));var c=u&&d&&(null!==(a=i.translateY)&&void 0!==a?a:0)<=(null!==(r=null===(e=s)||void 0===e?void 0:e.translateYFrom)&&void 0!==r?r:0)&&!this.props.isBack?(null!==(l=null===(n=s)||void 0===n?void 0:n.translateYFrom)&&void 0!==l?l:0)+10:100;this.animateTranslate(i,c),s?s.id&&!this.state.modalOpenedLog.includes(s.id)&&(s.translateY=void 0,this.setState((function(t){return{modalOpenedLog:m(t.modalOpenedLog).concat([s.id])}}))):(this.setMaskOpacity(i,0),this.setState({modalOpenedLog:[]}),i.translateY=void 0)}else t&&ot("closeActiveModal: модальное окно (страница) ".concat(t," не существует"),"error")}},{key:"onPageTouchMove",value:function(t,e){var n,o,i=t.shiftY,a=t.originalEvent,r=a.target;if(t.isY){if(!(null===(n=e.innerElement)||void 0===n?void 0:n.contains(r)))return a.preventDefault();a.stopPropagation();var l,s,d=e.expandable,u=e.contentScrolled,c=e.collapsed,v=e.expanded;if(!this.state.touchDown)e.touchStartContentScrollTop=null!==(s=null===(l=e.contentElement)||void 0===l?void 0:l.scrollTop)&&void 0!==s?s:0,this.setState({touchDown:!0});if(!u&&(null===e.touchMovePositive&&(e.touchMovePositive=i>0),!e.expandable||c||v&&e.touchMovePositive&&0===e.touchStartContentScrollTop||(null===(o=e.headerElement)||void 0===o?void 0:o.contains(r)))){if(a.preventDefault(),!d&&i<0||!this.window)return;!this.state.dragging&&this.setState({dragging:!0});var p,h=i/this.window.innerHeight*100,f=S(h,72,.8,this.props.platform!==k.IOS);e.touchShiftYPercent=h,e.translateYCurrent=at((null!==(p=e.translateY)&&void 0!==p?p:0)+f),this.animateTranslate(e,e.translateYCurrent),this.setMaskOpacity(e)}}else{var m;(null===(m=this.viewportRef.current)||void 0===m?void 0:m.contains(r))&&a.preventDefault()}}},{key:"onCardTouchMove",value:function(t,e){var n,o=t.originalEvent,i=t.shiftY,a=o.target;if(null===(n=e.innerElement)||void 0===n?void 0:n.contains(a)){this.state.touchDown||this.setState({touchDown:!0,dragging:!0});var r,l=i/e.innerElement.offsetHeight*100,s=S(l,72,1.2,this.props.platform!==k.IOS);e.touchShiftYPercent=l,e.translateYCurrent=Math.max(0,(null!==(r=e.translateY)&&void 0!==r?r:0)+s),this.animateTranslate(e,e.translateYCurrent),this.setMaskOpacity(e)}}},{key:"onPageTouchEnd",value:function(t,e){var n,o=this,i=t.startY,a=t.shiftY;if(e.contentScrolled=!1,e.touchMovePositive=null,this.state.dragging&&this.window){var r,l,s,d,u=(i+a)/this.window.innerHeight*100,c=null!==(r=e.translateYCurrent)&&void 0!==r?r:0;if(c=at(c+c/t.duration*240*.6*((null!==(l=e.touchShiftYPercent)&&void 0!==l?l:0)<0?-1:1)),100!==e.settlingHeight)if(it(c,e.expandedRange))c=null!==(d=null===(s=e.expandedRange)||void 0===s?void 0:s[0])&&void 0!==d?d:0;else if(it(c,e.collapsedRange)){var v;c=null!==(v=e.translateYFrom)&&void 0!==v?v:0}else if(it(c,e.hiddenRange))c=100;else{var p;c=null!==(p=e.translateYFrom)&&void 0!==p?p:0}else c=it(c,[0,25])?0:100;100!==c&&u>=75&&(c=100),e.translateY=c,e.translateYCurrent=c,e.collapsed=c>0&&c<u,e.expanded=0===c,e.hidden=100===c,e.hidden&&this.props.onExit(),n=function(){e.hidden||o.animateTranslate(e,e.translateY),o.setMaskOpacity(e)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"onCardTouchEnd",value:function(t,e){var n,o=t.duration,i=this;if(this.state.dragging){var a,r,l=null!==(a=e.translateYCurrent)&&void 0!==a?a:0,s=l/o*240*.6*((null!==(r=e.touchShiftYPercent)&&void 0!==r?r:0)<0?-1:1);l=(l=Math.max(0,l+s))>=30?100:0,e.translateY=l,e.hidden=100===l,e.hidden&&this.props.onExit(),n=function(){e.hidden||i.animateTranslate(e,e.translateY),i.setMaskOpacity(e)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"waitTransitionFinish",value:function(t,e){if(N.supported){var n,o,i=function(){var n,o;null===(o=t)||void 0===o||null===(n=o.innerElement)||void 0===n||n.removeEventListener(N.name,i),e()};null===(o=t)||void 0===o||null===(n=o.innerElement)||void 0===n||n.addEventListener(N.name,i)}else setTimeout(e,this.timeout)}},{key:"animateTranslate",value:function(t,e){var n="animateTranslateFrame".concat(t.id);cancelAnimationFrame(this.frameIds[n]),this.frameIds[n]=requestAnimationFrame((function(){var n,o;n=t.innerElement,o="translate3d(0, ".concat(e,"%, 0)"),n&&(n.style.transform=o,n.style.webkitTransform=o)}))}},{key:"setMaskOpacity",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this;null===n&&(null===(e=this.props.history)||void 0===e?void 0:e[0])!==t.id||(this.maskAnimationFrame&&cancelAnimationFrame(this.maskAnimationFrame),this.maskAnimationFrame=requestAnimationFrame((function(){if(o.maskElementRef.current){var e=t.translateY,i=void 0===e?0:e,a=t.translateYCurrent,r=null===n?1-((void 0===a?0:a)-i)/(100-i)||0:n;o.maskElementRef.current.style.opacity=x(r,0,100).toString()}})))}},{key:"render",value:function(){var t,e=this,n=this.props,o=n.activeModal,i=n.exitingModal,a=n.enteringModal,r=this.state,l=r.touchDown,d=r.dragging;return o||i?H.createElement(C.Provider,{value:!0},H.createElement(I.Provider,{value:this.modalRootContext},H.createElement(R,{className:w("vkuiModalRoot",(null===(t=this.props.configProvider)||void 0===t?void 0:t.webviewType)===T.VKAPPS&&"vkuiModalRoot--vkapps",l&&w("vkuiModalRoot--touched","vkuiInternalModalRoot--touched"),!(!a&&!i)&&w("vkuiModalRoot--switching","vkuiInternalModalRoot--switching")),onMove:this.onTouchMove,onEnd:this.onTouchEnd,onScroll:this.onScroll},H.createElement("div",{className:"vkuiModalRoot__mask",onClick:this.props.onExit,ref:this.maskElementRef}),H.createElement("div",{className:"vkuiModalRoot__viewport",ref:this.viewportRef},this.getModals().map((function(t){var n=G(t.props),a=e.props.getModalState(n);if(n!==o&&n!==i||!a)return null;var r=s({},a),l=r.type===X.PAGE,u="modal-".concat(n);return H.createElement(U,{key:u,getRootRef:function(t){var o=e.props.getModalState(n);o&&(o.modalElement=t)},onClose:e.props.onExit,timeout:e.timeout,className:w("vkuiModalRoot__modal",d&&"vkuiInternalModalRoot__modal--dragging",l&&r.expandable&&"vkuiInternalModalRoot__modal--expandable",l&&r.collapsed&&"vkuiInternalModalRoot__modal--collapsed"),restoreFocus:!1},t)})))))):null}}]),o}(),st=function(t,e,n){return function(o){var i=H.useContext(e);return H.createElement(t,p(s({},o),h({},n,i)))}}((rt=E(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return function(e){return function(n){var o=tt(n.activeModal,n.children,n.onOpen,n.onOpened,n.onClose,n.onClosed,t);return H.createElement(e,s({},n,o))}}}((function(t){switch(t.type){case X.PAGE:return t.settlingHeight=t.settlingHeight||75,dt(t);case X.CARD:return function(t){t.translateY=0}(t)}}))(lt)),function(t){var e=f().platform;return H.createElement(rt,p(s({},t),{platform:e}))}),M,"configProvider");function dt(t){var e,n,o,i=t.contentElement,a=(null===(e=i)||void 0===e?void 0:e.firstElementChild).offsetHeight,r=t.translateY;t.expandable=a>(null!==(o=null===(n=i)||void 0===n?void 0:n.clientHeight)&&void 0!==o?o:0)||100===t.settlingHeight||t.expanded;var l,s,d,u,c,v=!1,p=!1;if(t.expandable){var h,f=(l=100-(null!==(h=t.settlingHeight)&&void 0!==h?h:0))/2,m=100-l;d=[0,f],u=[f,l+m/4],c=[l+m/4,100],v=l>0,p=l<=0,s=l}else{var g,M,E,y,k;d=[s=l=100-(a+(null!==(y=null===(g=t.headerElement)||void 0===g?void 0:g.offsetHeight)&&void 0!==y?y:0))/(null!==(k=null===(E=t.innerElement)||void 0===E||null===(M=E.parentElement)||void 0===M?void 0:M.offsetHeight)&&void 0!==k?k:0)*100,s+25],u=[s+25,s+25],c=[s+25,s+100]}(t.expandable&&s>(null!=r?r:100)||100===t.settlingHeight)&&(s=0),0===s&&(p=!0,v=!1),t.expandedRange=d,t.collapsedRange=u,t.hiddenRange=c,t.translateY=s,t.translateYFrom=l,t.collapsed=v,t.expanded=p}var ut=function(e){var o,i=e.activeModal,a=e.children,r=e.onOpen,l=e.onOpened,s=e.onClose,d=e.onClosed,u=H.useRef(null),c=H.useRef(void 0),v=H.useRef(void 0),p=n().document,h=f(),m=h.webviewType,M=h.platform,E=tt(i,a,r,l,s,d,g),y=E.activeModal,S=E.exitingModal,C=E.onExit,R=E.getModalState,O=E.enteringModal,A=E.onEnter,Y=E.onEntered,F=E.onExited,b=E.history,_=E.delayEnter,D=q().waitTransitionFinish,j=B({exitingModal:S,enteringModal:O,activeModal:y}),L=P({updateModalHeight:function(){},registerModal:function(e){var n=e.id,i=t(e,["id"]);return Object.assign(null!==(o=R(n))&&void 0!==o?o:{},i)},onClose:C,isInsideModal:!0}),N=M===k.IOS?400:320,K=H.Children.toArray(a),z=function(t,e){var n;(null===(n=t)||void 0===n?void 0:n.innerElement)&&(t.innerElement.style.transition="",t.innerElement.style.transitionDelay=e&&_?"".concat(N,"ms"):"",t.innerElement.style.opacity=e?"1":"0")},V=function(t){var e=R(t);e&&(y?F(t):requestAnimationFrame((function(){var n;D(null===(n=e)||void 0===n?void 0:n.innerElement,(function(){return F(t)}),N),z(e,!1),function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&(null===(e=b)||void 0===e?void 0:e[0])!==t.id||(c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame((function(){if(u.current){var e=t.translateY,o=void 0===e?0:e,i=t.translateYCurrent,a=null===n?1-((void 0===i?0:i)-o)/(100-o)||0:n;u.current.style.opacity=x(a,0,100).toString()}})))}(e,0)})))};return H.useEffect((function(){if(j){var t,e;if(S&&S!==j.exitingModal&&V(S),O&&O!==j.enteringModal&&function(){var t;if(O&&j){var e=R(O);A(),j.exitingModal?((null===(t=e)||void 0===t?void 0:t.innerElement)&&(e.innerElement.style.transition="none",e.innerElement.style.opacity="1"),Y(O)):requestAnimationFrame((function(){var t;O==O&&(D(null===(t=e)||void 0===t?void 0:t.innerElement,(function(){return Y(O)}),N),z(e,!0))}))}}(),y&&!j.activeModal)v.current=null!==(e=null===(t=p)||void 0===t?void 0:t.activeElement)&&void 0!==e?e:void 0;y||S||!v.current||(v.current.focus(),v.current=void 0)}})),y||S?H.createElement(I.Provider,{value:L},H.createElement("div",{className:w("vkuiModalRoot",m===T.VKAPPS&&"vkuiModalRoot--vkapps","vkuiModalRoot--desktop")},H.createElement("div",{className:"vkuiModalRoot__mask",ref:u,onClick:C}),H.createElement("div",{className:"vkuiModalRoot__viewport"},K.map((function(t){var e=G(t.props);if(e!==y&&e!==S)return null;var n="modal-".concat(e);return H.createElement(U,{restoreFocus:!1,onClose:C,timeout:N,key:n,className:"vkuiModalRoot__modal"},t)}))))):null},ct=function(t){var e=j().isDesktop;A(!!t.activeModal);var n=e?ut:st;return H.createElement(n,t)};const vt=H.lazy((()=>Y((()=>import("./FullstackModal-e3e57bbf.js")),["assets/FullstackModal-e3e57bbf.js","assets/index-99b15b47.js","assets/react-37698f52.js","assets/index-152d0029.css","assets/App-e440e7c4.js","assets/getNavId-aa412334.js","assets/PanelHeaderButton-a5396a9b.js","assets/Subhead-27ad3fc5.js","assets/useWaitTransitionFinish-e4f41df5.js"]))),pt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const t=F(),{modal:e}=L();return b.jsx(_,{id:"test",children:b.jsx(ct,{activeModal:e,onClose:()=>t.hideModal(),children:b.jsx(vt,{id:D})})})}},Symbol.toStringTag,{value:"Module"}));export{X as M,pt as i};
