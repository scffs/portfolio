var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(r,t,n)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,o=(e,o)=>{for(var s in o||(o={}))t.call(o,s)&&a(e,s,o[s]);if(r)for(var s of r(o))n.call(o,s)&&a(e,s,o[s]);return e},s=(e,a)=>{var o={};for(var s in e)t.call(e,s)&&a.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&r)for(var s of r(e))a.indexOf(s)<0&&n.call(e,s)&&(o[s]=e[s]);return o};import{_ as l,h as i,a as u,b as c,A as d,f as p,s as m,g as v}from"./index-mGnvKZ88.js";import{h as f,e as b,g as y,v as h,u as k,n as E,j as P,c as _,E as L,G as O,C as g,d as j}from"./AppWrapper-XptGs06i.js";function w(){const{appearance:e}=f();return null!=e?e:"light"}const x="enableKeyboardInput",R="disableKeyboardInput",A={passive:!0,capture:!0};const I=e=>"object"==typeof e&&null!==e&&e.hasOwnProperty("current"),z="_AppRoot_6etbo_1",N="_AppRoot--pointer-has-not_6etbo_5",C="_AppRoot--pointer-none_6etbo_25",F={none:"vkui--sizeX-none",regular:"vkui--sizeX-regular"},$={none:"vkui--sizeY-none",compact:"vkui--sizeY-compact"},T={card:"vkui--layout-card",plain:"vkui--layout-plain"};const X="--vkui_internal--safe_area_inset_",Y=e=>{var r=e,{children:t,mode:n="full",scroll:a="global",portalRoot:d=null,disablePortal:p,disableParentTransformForPositionFixedElements:m,className:v,safeAreaInsets:f,layout:g}=r,j=s(r,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const Y=function(){const{document:e}=b(),r=l(!1);return y((()=>{if(!e)return;const t=e=>{h(e)&&(r.current=!0)},n=()=>{r.current=!0},a=()=>{r.current=!1};return e.addEventListener("keydown",t,A),e.addEventListener(x,n,A),e.addEventListener(R,a,A),e.addEventListener("mousedown",a,A),e.addEventListener("touchstart",a,A),()=>{e.removeEventListener("keydown",t,A),e.removeEventListener(x,n,A),e.removeEventListener(R,a,A),e.removeEventListener("mousedown",a,A),e.removeEventListener("touchstart",a,A)}}),[e]),r}(),K=l(null),[S,B]=i(null),{document:G}=b(),W=w(),{hasPointer:q,sizeX:D="none",sizeY:H="none"}=k();y((()=>{let e=null;return d&&(e=I(d)?d.current:d),e||(e=G.createElement("div"),G.body.appendChild(e)),B(e),()=>{var r;d||null==(r=null==e?void 0:e.parentElement)||r.removeChild(e)}}),[d]),y((()=>{var e;if("partial"===n)return E;const r=null==(e=K.current)?void 0:e.parentElement,t=["vkui__root"].concat("embedded"===n?"vkui__root--embedded":[]);return r&&("embedded"!==n||m||(r.style.transform="translate3d(0, 0, 0)"),r.classList.add(...t)),()=>{r&&("embedded"!==n||m||(r.style.transform=""),r.classList.remove(...t))}}),[m]),y((()=>{if("full"===n)return G.documentElement.classList.add("vkui"),()=>{G.documentElement.classList.remove("vkui")}}),[G,n]),y((()=>{var e;if("partial"===n||!(null==(e=K.current)?void 0:e.parentElement)||!f)return;const r=K.current.parentElement;let t;for(t in f)if(f.hasOwnProperty(t)&&"number"==typeof f[t]){const e=f[t];r.style.setProperty(X+t,`${e}px`),S&&S.style.setProperty(X+t,`${e}px`)}return()=>{if(!f)return;let e;for(e in f)f.hasOwnProperty(e)&&(r.style.removeProperty(X+e),S&&S.style.removeProperty(X+e))}}),[f,S]),y((()=>{var e;if("partial"===n)return E;const r=function(e,r,t){const n=[];return e&&n.push(T[e]),"compact"!==r&&n.push(F[r]),"regular"!==t&&n.push($[t]),n}(g,D,H),t="embedded"===n?null==(e=K.current)?void 0:e.parentElement:G.body;return r.length&&t?(t.classList.add(...r),()=>{t.classList.remove(...r)}):E}),[D,H,g]),y((()=>"full"!==n||void 0===W?E:(G.documentElement.style.setProperty("color-scheme",W),()=>G.documentElement.style.removeProperty("color-scheme"))),[W]);const J=u((()=>"contain"===a?L:O),[a]),M=c(P.Provider,{value:{appRoot:K,portalRoot:S,embedded:"embedded"===n,mode:n,disablePortal:p,layout:g,get keyboardInput(){return Y.current}}},c(J,{elRef:K},t));return"partial"===n?M:c("div",o({ref:K,className:_(z,void 0===q?C:!q&&N,v)},j),M)};function K(e){const r=l(e);var t,n;return t=r.current,n=e,Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every((e=>t[e]===n[e]))||(r.current=e),r.current}const S=(e,r)=>{let t;switch(e){case"android":t="vkBase";break;case"ios":t="vkIOS";break;case"vkcom":t="vkCom";break;default:t=e}return`vkui--${t}--${r}`},B=({children:e,platform:r,appearance:t})=>c(v,null,d.map(e,(e=>p(e)?m(e,{className:_(e.props.className,S(r,t))}):e)));function G(e){var r=e,{children:t}=r,n=s(r,["children"]);const a=f(),l=K(o(o({},a),n));return c(g.Provider,{value:l},t)}const W=({value:e,children:r})=>{const t=j();return c(G,{appearance:e},c(B,{platform:t,appearance:e},r))};export{W as A,B as T,K as a,Y as b,S as g,I as i,w as u};
