var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&s(e,r,t[r]);return e},c=(e,n)=>t(e,r(n)),i=(e,t)=>{var r={};for(var s in e)a.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&o.call(e,s)&&(r[s]=e[s]);return r};import{h as u,T as p,_ as d,F as m,y as b,O as f,d as v,e as y,c as h}from"./index-3f878bd3.js";import{i as k,h as P,p as O,f as _,E,K as g,g as j,S as A,u as w,o as R,j as I,c as x,F as C,G as L,P as K,C as N,d as F}from"./AppWrapper-86474aa5.js";function T(){const{appearance:e}=k();return null!=e?e:"light"}let S={bottom:null,top:null,left:null,right:null};function $(e=!1){const[t,r]=u(S);return P((()=>{if(e)return;const t=e=>{const t=function(e){const{type:t,data:r}=e.detail;switch(t){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":const{insets:e}=r;if(e)return c(l({},e),{bottom:e.bottom>150?0:e.bottom})}return null}(e);t&&r(t)};return O.subscribe(t),()=>{O.unsubscribe(t)}}),[e]),t}const z=e=>"object"==typeof e&&null!==e&&e.hasOwnProperty("current"),D="_AppRoot_anbkk_1",U="_AppRoot--pointer-has-not_anbkk_5",V="_AppRoot--pointer-none_anbkk_25",W={none:"vkui--sizeX-none",[A.REGULAR]:"vkui--sizeX-regular"},X={card:"vkui--layout-card",plain:"vkui--layout-plain"};const B="--vkui_internal--safe_area_inset_",G=e=>{var t=e,{children:r,mode:n="full",scroll:a="global",portalRoot:o=null,disablePortal:s,disableParentTransformForPositionFixedElements:c,className:f,safeAreaInsets:v,layout:y}=t,h=i(t,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const k=function(){const{document:e}=_(),[t,r]=u(!1),n=p((()=>{r(!0)}),[]),a=p((e=>{E(e)===g.TAB&&n()}),[n]),o=p((()=>{r(!1)}),[]),s={passive:!0,capture:!0};return j(e,"keydown",a,s),j(e,"mousedown",o,s),j(e,"touchstart",o,s),j(e,"enableKeyboardInput",n,s),j(e,"disableKeyboardInput",o,s),t}(),O=d(null),[K,N]=u(null),{document:F}=_(),S=$(!v),G=v||S,M=T(),{hasPointer:q,sizeX:H="none"}=w();P((()=>{let e=null;return o&&(e=z(o)?o.current:o),e||(e=F.createElement("div"),F.body.appendChild(e)),N(e),()=>{var t;o||null==(t=null==e?void 0:e.parentElement)||t.removeChild(e)}}),[o]),P((()=>{var e;if("partial"===n)return R;const t=null==(e=O.current)?void 0:e.parentElement,r=["vkui__root"].concat("embedded"===n?"vkui__root--embedded":[]);return t&&("embedded"!==n||c||(t.style.transform="translate3d(0, 0, 0)"),t.classList.add(...r)),()=>{t&&("embedded"!==n||c||(t.style.transform=""),t.classList.remove(...r))}}),[c]),P((()=>{if("full"===n)return F.documentElement.classList.add("vkui"),()=>{F.documentElement.classList.remove("vkui")}}),[F,n]),P((()=>{var e;if("partial"===n||!(null==(e=O.current)?void 0:e.parentElement))return R;const t=O.current.parentElement;let r;for(r in G)if(G.hasOwnProperty(r)&&"number"==typeof G[r]){const e=G[r];t.style.setProperty(B+r,`${e}px`),K&&K.style.setProperty(B+r,`${e}px`)}return()=>{let e;for(e in G)G.hasOwnProperty(e)&&(t.style.removeProperty(B+e),K&&K.style.removeProperty(B+e))}}),[G,K]),P((()=>{var e;if("partial"===n)return R;const t=function(e,t){const r=[];return e&&r.push(X[e]),t!==A.COMPACT&&r.push(W[t]),r}(y,H),r="embedded"===n?null==(e=O.current)?void 0:e.parentElement:F.body;return t.length&&r?(r.classList.add(...t),()=>{r.classList.remove(...t)}):R}),[H,y]),P((()=>"full"!==n||void 0===M?R:(F.documentElement.style.setProperty("color-scheme",M),()=>F.documentElement.style.removeProperty("color-scheme"))),[M]);const J=m((()=>"contain"===a?C:L),[a]),Q=b(I.Provider,{value:{appRoot:O,portalRoot:K,embedded:"embedded"===n,keyboardInput:k,mode:n,disablePortal:s,layout:y}},b(J,{elRef:O},r));return"partial"===n?Q:b("div",l({ref:O,className:x(D,void 0===q?V:!q&&U,f)},h),Q)};function M(e){const t=d(e);var r,n;return r=t.current,n=e,Object.keys(r).length===Object.keys(n).length&&Object.keys(r).every((e=>r[e]===n[e]))||(t.current=e),t.current}const q=(e,t)=>{let r;switch(e){case K.ANDROID:r="vkBase";break;case K.IOS:r="vkIOS";break;case K.VKCOM:r="vkCom";break;default:r=e}return`vkui--${r}--${t}`},H=({children:e,platform:t,appearance:r})=>b(h,null,f.map(e,(e=>v(e)?y(e,{className:x(e.props.className,q(t,r))}):e)));function J(e){var t=e,{children:r}=t,n=i(t,["children"]);const a=k(),o=M(l(l({},a),n));return b(N.Provider,{value:o},r)}const Q=({appearance:e,children:t})=>{const r=F();return b(J,{appearance:e},b(H,{platform:r,appearance:e},t))};export{Q as A,H as T,M as a,G as b,q as g,z as i,T as u};
