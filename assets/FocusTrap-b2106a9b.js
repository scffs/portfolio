var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;import{h as a,q as l,y as i}from"./index-be53575a.js";import{e as s,f as c,j as u,a7 as f,h as p,g as d,a9 as v,E as m,K as y}from"./AppWrapper-57d4a081.js";function h(e){const t=new Set;return(e,r="warn")=>{if(!t.has(e)){t.add(e)}}}const b=v.join(),g=e=>{var v=e,{Component:h="div",onClose:g,restoreFocus:w=!0,timeout:E=0,getRootRef:j,children:O}=v,x=((e,o)=>{var a={};for(var l in e)r.call(e,l)&&o.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&t)for(var l of t(e))o.indexOf(l)<0&&n.call(e,l)&&(a[l]=e[l]);return a})(v,["Component","onClose","restoreFocus","timeout","getRootRef","children"]);const C=s(j),{document:A,window:S}=c(),[I,P]=a(null),[R,F]=a(null),{keyboardInput:K}=l(u),k=f((()=>{var e;K&&!(null==(e=C.current)?void 0:e.contains(A.activeElement))&&(null==I?void 0:I.length)&&I[0].focus()}),E);p((()=>{k.set()}),[]),p((()=>{if(!C.current)return;const e=[];Array.prototype.forEach.call(C.current.querySelectorAll(b),(t=>{const{display:r,visibility:n}=S.getComputedStyle(t);"none"!==r&&"hidden"!==n&&e.push(t)})),0===e.length&&e.push(C.current),P(e)}),[O]);const q=f((()=>{R&&R.focus()}),E);p((()=>{if(w&&A.activeElement)return F(A.activeElement),()=>{q.set()}}),[w]);return d(A,"keydown",(e=>{if(m(e)===y.TAB&&(null==I?void 0:I.length)){const t=I.length-1,r=I.findIndex((t=>t===e.target)),n=-1===r||r===t&&!e.shiftKey;if(n||0===r&&e.shiftKey){e.preventDefault();const r=I[n?0:t];return r!==A.activeElement&&r.focus(),!1}}return g&&m(e)===y.ESCAPE&&g(),!0}),{capture:!0}),i(h,((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&o(e,l,a[l]);return e})({tabIndex:-1,ref:C},x),O)};export{g as F,h as w};
