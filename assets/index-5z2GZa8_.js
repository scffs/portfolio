var e=Object.defineProperty,n=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(n,i,a)=>i in n?e(n,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[i]=a,l=(e,n)=>{for(var i in n||(n={}))r.call(n,i)&&o(e,i,n[i]);if(a)for(var i of a(n))t.call(n,i)&&o(e,i,n[i]);return e},s=(e,a)=>n(e,i(a)),c=(e,n)=>{var i={};for(var o in e)r.call(e,o)&&n.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&a)for(var o of a(e))n.indexOf(o)<0&&t.call(e,o)&&(i[o]=e[o]);return i};import{b as _,F as u,q as d,h as p,_ as v,p as w,T as m,A as b,u as f}from"./index-UZJ5t5iP.js";import{c as h,D as k,H as V,e as g,n as y,al as B,aB as T,h as x,d as P,g as E,aC as H,k as C,T as N,aD as O,u as j,aE as S,q as W}from"./AppWrapper-f2C8H5bU.js";import{T as A,N as I,A as L}from"./Group-El_Mz6PY.js";import{a as X}from"./AppearanceProvider-6Ht9gXrP.js";import{T as z,e as M,b as $,P as D}from"./App-gyvK6TTj.js";const F={1:"_Title--level-1_9ajty_1",2:"_Title--level-2_9ajty_8",3:"_Title--level-3_9ajty_15"},K=e=>{var n=e,{className:i,level:a="1",Component:r="span",normalize:t=!0}=n,o=c(n,["className","level","Component","normalize"]);return _(z,l({Component:r,normalize:t,className:h(i,F[a])},o))};var R=k("Icon24ArrowLeftOutline","arrow_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="arrow_left_outline_24"><path fill="currentColor" d="M11.532 4.26a.9.9 0 0 1 .089 1.18l-.08.092L6.05 11.1H20.1a.9.9 0 0 1 .113 1.793l-.113.007H6.05l5.49 5.568a.9.9 0 0 1 .073 1.181l-.081.092a.9.9 0 0 1-1.181.072l-.092-.081-7-7.1a.9.9 0 0 1-.08-1.172l.08-.092 7-7.1a.9.9 0 0 1 1.273-.009" /></symbol>',24,24,!1,void 0),q=k("Icon24ChevronLeftOutline","chevron_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="chevron_left_outline_24"><path d="m8.414 12 7.293 7.293a1 1 0 0 1-1.414 1.414l-8-8a1 1 0 0 1 0-1.414l8-8a1 1 0 1 1 1.414 1.414z" /></symbol>',24,24,!1,void 0),G=k("Icon28ArrowLeftOutline","arrow_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_left_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path fill="currentColor" fill-rule="nonzero" d="M12.293 6.293a1 1 0 0 1 1.414 1.414L8.414 13H22a1 1 0 0 1 .993.883L23 14a1 1 0 0 1-1 1H8.414l5.293 5.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0l-7-7-.073-.082A1.005 1.005 0 0 1 5 14l.004.09A1.006 1.006 0 0 1 5 14.02V14a1.02 1.02 0 0 1 .125-.484.878.878 0 0 1 .071-.111.999.999 0 0 1 .097-.112l-.08.09c.025-.031.051-.062.08-.09Z" /></g></symbol>',28,28,!1,void 0),Z=k("Icon28ChevronBack","chevron_back_28","0 0 20 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 28" id="chevron_back_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v28H0z" /><path fill="currentColor" d="M4.56 12.94 13 4.5a1.414 1.414 0 0 1 2 2L7.5 14l7.5 7.5a1.414 1.414 0 0 1-2 2l-8.44-8.44a1.5 1.5 0 0 1 0-2.12" /></g></symbol>',20,28,!1,void 0),J=k("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chevron_left_outline_28"><path fill="currentColor" d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" /></symbol>',28,28,!1,void 0);function Q(e,n){return e.nav||e.id}const U=u({entering:!1}),Y=({children:e,entering:n})=>{const i=d(U),a=X({entering:i.entering||n});return _(U.Provider,{value:a},e)},ee=u(void 0),ne=({children:e,isBack:n})=>{const i=d(ee),a=void 0!==n?n:i,[r]=p(a);return _(ee.Provider,{value:r},e)};function ie(e){const n=v();return w((()=>{n.current=e})),n.current}const ae=Boolean(V&&window.__isVkuiTesting),re={supported:!1},te={supported:!1,name:null};V&&!ae&&(("undefined"!=typeof AnimationEvent||"undefined"!=typeof WebKitAnimationEvent)&&(re.supported=!0),"undefined"!=typeof TransitionEvent?(te.supported=!0,te.name="transitionend"):"undefined"!=typeof WebKitTransitionEvent&&(te.supported=!0,te.name="webkitTransitionEnd"));const oe=(e,n,i)=>({swipedToOpposite:n<0,swipeBackTriggered:n>=10,viewportStartEdgeTouched:e<=20,viewportEndEdgeTouched:e>=i-20}),le={View:"_View_1nb1b_1","View--animated":"_View--animated_1nb1b_8","View--swiping-back":"_View--swiping-back_1nb1b_9",View__panel:"_View__panel_1nb1b_13",View__header:"_View__header_1nb1b_14",View__panels:"_View__panels_1nb1b_20","View__panel-in":"_View__panel-in_1nb1b_33","View__panel-overlay":"_View__panel-overlay_1nb1b_45","View--ios":"_View--ios_1nb1b_61","View__panel--swipe-back-prev":"_View__panel--swipe-back-prev_1nb1b_61","View__panel--swipe-back-success":"_View__panel--swipe-back-success_1nb1b_61","View__panel--swipe-back-next":"_View__panel--swipe-back-next_1nb1b_66","View__panel--swipe-back-failed":"_View__panel--swipe-back-failed_1nb1b_71","View__panel--next":"_View__panel--next_1nb1b_94","View__panel--prev":"_View__panel--prev_1nb1b_94","animation-view-prev-back":"_animation-view-prev-back_1nb1b_1","animation-view-next-forward":"_animation-view-next-forward_1nb1b_1","View--no-motion":"_View--no-motion_1nb1b_102","animation-ios-prev-forward":"_animation-ios-prev-forward_1nb1b_1","animation-ios-next-back":"_animation-ios-next-back_1nb1b_1","animation-ios-next-forward":"_animation-ios-next-forward_1nb1b_1","animation-ios-prev-back":"_animation-ios-prev-back_1nb1b_1","animation-ios-fade-in":"_animation-ios-fade-in_1nb1b_1","animation-ios-fade-out":"_animation-ios-fade-out_1nb1b_1","View__panel--active":"_View__panel--active_1nb1b_173"};let se={};const ce=e=>{var n=e,{activePanel:i,history:a,nav:r,onTransition:t,onSwipeBack:o,onSwipeBackStart:u,onSwipeBackCancel:d,children:f,className:k}=n,N=c(n,["activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancel","children","className"]);const O=Q({nav:r,id:N.id}),j=v(se[O]||{}),S=v(y);w((()=>()=>{O&&(se[O]=j.current)}));const W=v({}),{window:L,document:X}=g(),z=T(),$=x(),D=M(),F=P(),[K,R]=p(!1),[q,G]=p([i]),[Z,J]=p(i),[U,ee]=p(void 0),[ae,ce]=p(null),[_e,ue]=p(null),de=v(!1),[pe,ve]=p(void 0),[we,me]=p(0),[be,fe]=p(0),[he,ke]=p(null),[Ve,ge]=p(null),[ye,Be]=p(null),[Te,xe]=p(!1),Pe=ie(i),Ee=ie(pe),He=ie(Te),Ce=ie(ye),Ne=ie(Ve),Oe=ie(t),je=b.toArray(f).filter((e=>{const n=Q(e.props);return void 0!==n&&q.includes(n)||n===Ve||n===he})),Se=!$.transitionMotionEnabled||!D.animate||"vkcom"===F,We=!Se&&"ios"===F&&$.isWebView&&Boolean(o),Ae=e=>null===e?null:W.current[e],Ie=m(((e,n)=>{n&&(j.current[e]=0),ce(null),ue(null),G([i]),J(i),R(!1),ee(n),S.current=()=>{null==z||z.scrollTo(0,n?j.current[i]:0),t&&t({isBack:n,from:e,to:i})}}),[i,t,z]);E((()=>{S.current(),S.current=y}),[S.current]);const Le=m((e=>{e&&![le["animation-ios-next-forward"],le["animation-ios-prev-back"],le["animation-view-next-forward"],le["animation-view-prev-back"]].includes(e.animationName)||null===ae||Ie(ae,Boolean(U))}),[Ie,U,ae]),{waitTransitionFinish:Xe}=(()=>{const e=v(null),{document:n}=g(),i=v(y),a=m((()=>{i.current(),i.current=y}),[]);return{waitTransitionFinish:m(((r,t,o)=>{r&&(!(null==n?void 0:n.hidden)&&te.supported&&te.name?(a(),r.addEventListener(te.name,t),i.current=()=>{te.name&&r.removeEventListener(te.name,t)}):((null==e?void 0:e.current)&&clearTimeout(e.current),e.current=setTimeout(t,o)))}),[n,a,e])}})(),ze=H(Le,"ios"===F?600:300),Me=m((()=>{o&&o()}),[o]),$e=m((()=>{d&&d(),ge(null),ke(null),ve(!1),Be(null),me(0),fe(0)}),[d]),De=m((e=>{if(!e||(null==e?void 0:e.propertyName.includes("transform"))&&(null==e?void 0:e.target)===Ae(he))switch(ye){case"fail":$e();break;case"success":Me()}}),[$e,Me,he,ye]),Fe=e=>{if(!V||!L)return{};const n=e===Ve,i=e===he;if(!n&&!i||ye)return{};let a=`${be}px`,r=100*be/L.innerWidth/2-50+"%";return i?{transform:`translate3d(${r}, 0, 0)`,WebkitTransform:`translate3d(${r}, 0, 0)`}:n?{transform:`translate3d(${a}, 0, 0)`,WebkitTransform:`translate3d(${a}, 0, 0)`}:{}},Ke=e=>{if(!V||!L)return{};if(!(e===he))return{};const n=1-be/L.innerWidth,i="success"===ye?0:"fail"===ye?1:null;return{display:"block",opacity:null===i?n:i}};return w((()=>{if(Pe&&Pe!==i&&!Ee&&!He){const e=b.toArray(f).map((e=>Q(e.props))).find((e=>e===Pe||e===i))===i;j.current[Pe]=null==z?void 0:z.getScroll().y,Se?Ie(Pe,e):(C(X),G([Pe,i]),ce(Pe),ue(i),J(null),R(!0),ee(e),re.supported||ze.set())}if(Pe&&Pe!==i&&Ee){const e=i,n=Pe;Ne&&(j.current[Ne]=0),ge(null),ke(null),ve(!1),Be(null),me(0),fe(0),J(e),G([e]),ee(!0),S.current=()=>{null!==e&&(null==z||z.scrollTo(0,j.current[e])),Oe&&Oe({isBack:!0,from:n,to:e})}}!Ce&&ye&&Xe(Ae(he),De,"ios"===F?600:300),"fail"!==Ce||ye||null===Z||null==z||z.scrollTo(0,j.current[Z]),Pe!==i&&Te&&(xe(!1),ue(null),ce(null),R(!1),G([i]),J(i))}),[i,Z,ze,Te,f,Se,X,Ie,F,Pe,He,Oe,Ne,Ce,Ee,z,he,ye,De,Xe]),_(I.Provider,{value:O},_(A,s(l({Component:"section"},N),{className:h(le.View,"ios"===F&&h(le["View--ios"],"vkuiInternalView--ios"),!Se&&K&&le["View--animated"],!Se&&pe&&le["View--swiping-back"],Se&&le["View--no-motion"],k),onMoveX:We?e=>{if(de.current||function(e){var n;const i=e.originalEvent.target;return Boolean(null==(n=null==i?void 0:i.closest)?void 0:n.call(i,"input, textarea, [data-vkui-swipe-back=false]"))}(e))return;const{swipedToOpposite:n,swipeBackTriggered:i,viewportStartEdgeTouched:r}=oe(e.startX,e.shiftX,L.innerWidth);if(!K||!i){if(!pe&&a&&a.length>1){if(n)return void(de.current=!0);if(!i)return;if(!r&&(t=e.originalEvent.target,B(t).some((e=>"scrollLeft"in e&&e.scrollLeft>0))))return void(de.current=!0);if(u){if("prevent"===u(Z))return void(de.current=!0)}null!==Z&&(C(X),j.current[Z]=null==z?void 0:z.getScroll().y),ve(!0),me(e.startX),ge(Z),ke(a.slice(-2)[0])}var t;pe&&(e.shiftX<0?fe(0):e.shiftX>L.innerWidth-we?fe(L.innerWidth):fe(e.shiftX))}}:"ios"===F?e=>{if(Te)return;const{swipeBackTriggered:n,viewportStartEdgeTouched:i,viewportEndEdgeTouched:a}=oe(e.startX,e.shiftX,L.innerWidth);(i||a)&&n&&xe(!0)}:void 0,onEnd:We?e=>{var n;if(de.current=!1,pe){const i=be/e.duration*1e3;0===be?$e():be>=(null!=(n=L.innerWidth)?n:0)?Me():i>250||be>=L.innerWidth/2?Be("success"):Be("fail")}}:void 0}),_("div",{className:le.View__panels},je.map((e=>{var n;const i=Q(e.props),a=K&&i===(U?ae:_e),r=i===ae||i===Ve||i===he||i===_e&&U;return _("div",{className:h(le.View__panel,i===Z&&le["View__panel--active"],i===ae&&le["View__panel--prev"],i===_e&&le["View__panel--next"],i===Ve&&le["View__panel--swipe-back-prev"],i===he&&le["View__panel--swipe-back-next"],"success"===ye&&le["View__panel--swipe-back-success"],"fail"===ye&&le["View__panel--swipe-back-failed"]),onAnimationEnd:a?Le:void 0,ref:e=>void 0!==i&&(W.current[i]=e),style:Fe(i),key:i},"ios"===F&&_("div",{className:le["View__panel-overlay"],style:Ke(i)}),_("div",{className:le["View__panel-in"],style:{marginTop:r?-(null!=(n=j.current[i])?n:0):void 0}},_(ne,{isBack:pe||U},_(Y,{entering:i===_e||i===he},e))))})))))},_e="_PanelHeaderButton_h4him_1",ue="_PanelHeaderButton--primitive_h4him_19",de="_PanelHeaderBack--ios_h4him_52",pe="_PanelHeaderButton--notPrimitive_h4him_61",ve="_PanelHeaderButton--hover_h4him_83",we="_PanelHeaderButton--active_h4him_84",me="_PanelHeaderBack--vkcom_h4him_98",be="_PanelHeaderBack--has-label_h4him_98",fe="_PanelHeaderBack--sizeX-compact_h4him_104",he="_PanelHeaderButton__label_h4him_110",ke={ios:"_PanelHeaderButton--ios_h4him_30",android:"_PanelHeaderButton--android_h4him_61",vkcom:"_PanelHeaderButton--vkcom_h4him_74"},Ve=({primary:e,children:n})=>{const i=P();return"ios"===i?_(K,{Component:"span",level:"3",weight:e?"1":"3"},n):_($,{weight:"vkcom"===i?void 0:"2"},n)},ge=e=>{var n=e,{children:i,primary:a=!1,label:r,className:t}=n,o=c(n,["children","primary","label","className"]);const u=O(i),d=O(r),p=P();let v,w;switch(p){case"ios":v="background",w="opacity";break;case"vkcom":v=ve,w=we;break;default:v="background",w="background"}return _(N,s(l({Component:o.href?"a":"button"},o),{hoverMode:v,activeEffectDelay:200,activeMode:w,className:h("vkuiInternalPanelHeaderButton",_e,ke.hasOwnProperty(p)?ke[p]:ke.android,u&&ue,!u&&!d&&pe,t)}),u?_(Ve,{primary:a},i):i,d?_(Ve,{primary:a,className:he},r):r)},ye=e=>{var n=e,{label:i,className:a,children:r="Назад"}=n,t=c(n,["label","className","children"]);const o=P(),{sizeX:u="none"}=j(),d="vkcom"===o||"ios"===o;return _(ge,s(l({},t),{className:h("compact"===u&&fe,"ios"===o&&de,"vkcom"===o&&me,d&&!!i&&be,a),label:d&&i}),r&&_(S,null,r),(e=>{switch(e){case"ios":return _(Z,null);case"vkcom":return _(L,{IconCompact:q,IconRegular:J});default:return _(L,{IconCompact:R,IconRegular:G})}})(o))},Be=({title:e})=>{const n=W();return f(D,{before:f(ye,{onClick:()=>n.back()}),children:e})};export{Be as P,K as T,ce as V};
